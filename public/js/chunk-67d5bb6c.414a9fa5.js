(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67d5bb6c"],{"172d":function(t,e,r){"use strict";r.r(e);r("b0c0"),r("b64b");var n=r("7a23"),i={class:"grid"},o={class:"col-12"},a={class:"card"},c=Object(n["j"])("div",{class:"font-medium text-3xl text-900 mb-3"},"Detail OPD",-1),u={class:"list-none p-0 m-0"},s={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},l=Object(n["j"])("div",{class:"text-500 w-6 md:w-2 font-medium"},"Nama",-1),d={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},f={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},p=Object(n["j"])("div",{class:"text-500 w-6 md:w-2 font-medium"},"Latitude",-1),k={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},b={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},m=Object(n["j"])("div",{class:"text-500 w-6 md:w-2 font-medium"},"Longitude",-1),h={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},w={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},j=Object(n["j"])("div",{class:"text-500 w-6 md:w-2 font-medium"},"Radius",-1),g={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"};function O(t,e,r,O,v,y){var W=Object(n["H"])("DetailWorktime");return Object(n["z"])(),Object(n["i"])("div",i,[Object(n["j"])("div",o,[Object(n["j"])("div",a,[c,Object(n["j"])("ul",u,[Object(n["j"])("li",s,[l,Object(n["j"])("div",d,Object(n["L"])(v.workunit.name),1)]),Object(n["j"])("li",f,[p,Object(n["j"])("div",k,Object(n["L"])(v.workunit.lat),1)]),Object(n["j"])("li",b,[m,Object(n["j"])("div",h,Object(n["L"])(v.workunit.lng),1)]),Object(n["j"])("li",w,[j,Object(n["j"])("div",g,Object(n["L"])(v.workunit.radius),1)])])])]),0!=Object.keys(v.workunit).length?(Object(n["z"])(),Object(n["g"])(W,{key:0,workunit:v.workunit,workunitService:t.workunitService},null,8,["workunit","workunitService"])):Object(n["h"])("",!0)])}var v=r("fca4"),y={class:"col-12"},W={class:"card"},_={class:"my-2"},x=Object(n["j"])("div",{class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},[Object(n["j"])("h5",{class:"m-0"},"Detail Jam Kerja")],-1),S=Object(n["j"])("span",{class:"p-column-title"},"ID",-1),D={class:"field"},T=Object(n["j"])("label",{for:"name"},"Jam Kerja",-1),P={key:0,class:"p-invalid"};function C(t,e,r,i,o,a){var c=Object(n["H"])("Button"),u=Object(n["H"])("Toolbar"),s=Object(n["H"])("Column"),l=Object(n["H"])("DataTable"),d=Object(n["H"])("Dropdown"),f=Object(n["H"])("Dialog");return Object(n["z"])(),Object(n["i"])("div",y,[Object(n["j"])("div",W,[Object(n["n"])(u,{class:"mb-4"},{start:Object(n["R"])((function(){return[Object(n["j"])("div",_,[Object(n["n"])(c,{label:"New",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:a.openNew},null,8,["onClick"])])]})),_:1}),Object(n["n"])(l,{value:o.workunitWorktimes,ref:"dt",dataKey:"id",responsiveLayout:"scroll"},{header:Object(n["R"])((function(){return[x]})),default:Object(n["R"])((function(){return[Object(n["n"])(s,{field:"id",header:"ID",sortable:!0},{body:Object(n["R"])((function(t){return[S,Object(n["m"])(" "+Object(n["L"])(t.data.id),1)]})),_:1}),Object(n["n"])(s,{field:"name",header:"Nama"}),Object(n["n"])(s,{header:"Aksi"},{body:Object(n["R"])((function(t){return[t.data.id?(Object(n["z"])(),Object(n["g"])(c,{key:0,icon:"pi pi-trash",class:"p-button-rounded p-button-warning mt-2",onClick:function(e){return a.confirmDelete(t.data)}},null,8,["onClick"])):Object(n["h"])("",!0)]})),_:1})]})),_:1},8,["value"]),Object(n["n"])(f,{visible:o.workunitWorktimeDialog,"onUpdate:visible":e[1]||(e[1]=function(t){return o.workunitWorktimeDialog=t}),style:{width:"450px"},header:"Form Detail Jam Kerja",modal:!0,class:"p-fluid"},{footer:Object(n["R"])((function(){return[Object(n["n"])(c,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:a.hideDialog},null,8,["onClick"]),Object(n["n"])(c,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:a.saveWorktime},null,8,["onClick"])]})),default:Object(n["R"])((function(){return[Object(n["j"])("div",D,[T,Object(n["n"])(d,{modelValue:o.workunitWorktime.worktime_id,"onUpdate:modelValue":e[0]||(e[0]=function(t){return o.workunitWorktime.worktime_id=t}),options:o.worktimes,optionLabel:"name",optionValue:"id",placeholder:"Pilih Jam Kerja",class:Object(n["u"])({"p-invalid":o.submitted&&!o.workunitWorktime.worktime_id})},null,8,["modelValue","options","class"]),o.submitted&&!o.workunitWorktime.worktime_id?(Object(n["z"])(),Object(n["i"])("small",P,"Jam kerja diperlukan.")):Object(n["h"])("",!0)])]})),_:1},8,["visible"])])])}var I=r("5530"),L=(r("4de4"),r("d3b7"),r("7db0"),r("7467")),z={props:{workunit:{},workunitService:null},data:function(){return{loading:!1,worktimes:null,workunitWorktimes:null,workunitWorktime:{},filters:{},lazyParams:{},columns:[{field:"id",header:"ID"},{field:"name",header:"Nama"}],workunitWorktimeDialog:!1,submitted:!1}},worktimeService:null,created:function(){this.worktimeService=new L["a"],this.workunitWorktimes=this.workunit.worktimes},mounted:function(){this.initData()},methods:{initData:function(){var t=this;this.worktimeService.getAllWorktimes().then((function(e){t.worktimes=e}))},openNew:function(){this.workunitWorktime={},this.submitted=!1,this.workunitWorktimeDialog=!0},editPlace:function(t){this.workunitWorktime=Object(I["a"])({},t),this.workunitWorktimeDialog=!0},confirmDelete:function(t){var e=this;this.workunitWorktime=t,this.$swal({title:"Apakah anda yakin akan menghapus data ini ?",showCancelButton:!0,confirmButtonText:"Hapus"}).then((function(t){t.isConfirmed&&e.workunitService.deleteWorktime(e.workunit,e.workunitWorktime).then((function(t){"redirectTo"in t&&(localStorage.removeItem("presence_app_token"),e.$router.push(t.redirectTo)),t.success?(e.workunitWorktimes=e.workunitWorktimes.filter((function(t){return t.id!==e.workunitWorktime.id})),e.$swal({icon:"success",title:"Success",text:t.message}),e.workunitWorktimeDialog=!1,e.workunitWorktime={}):e.$swal({icon:"error",title:"Oops...",text:t.message})}))}))},hideDialog:function(){this.workunitWorktimeDialog=!1,this.submitted=!1},saveWorktime:function(){var t=this;this.submitted=!0,this.workunitService.assignWorktime(this.workunit,this.workunitWorktime).then((function(e){if("redirectTo"in e&&(localStorage.removeItem("presence_app_token"),t.$router.push(e.redirectTo)),e.success){t.$swal({icon:"success",title:"Success",text:e.message});var r=t.worktimes.find((function(e){return e.id===t.workunitWorktime.worktime_id}));t.workunitWorktimes=[{id:r.id,name:r.name}],t.workunitWorktimeDialog=!1,t.workunitWorktime={}}else t.$swal({icon:"error",title:"Oops...",text:e.message})}))},findIndexById:function(t){for(var e=-1,r=0;r<this.workunitWorktimes.length;r++)if(this.workunitWorktimes[r].id===t){e=r;break}return e}}},B=r("6b0d"),J=r.n(B);const N=J()(z,[["render",C]]);var F=N,H={components:{DetailWorktime:F},data:function(){return{workunitId:null,workunit:{},submitted:!1}},workunitService:null,created:function(){this.workunitId=this.$route.params.id,this.workunitService=new v["a"]},mounted:function(){this.initData()},methods:{initData:function(){var t=this;this.workunitService.getWorkunit(this.workunitId).then((function(e){t.workunit=e}))}}};const A=J()(H,[["render",O]]);e["default"]=A},"4de4":function(t,e,r){"use strict";var n=r("23e7"),i=r("b727").filter,o=r("1dde"),a=o("filter");n({target:"Array",proto:!0,forced:!a},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},5530:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));r("b64b"),r("a4d3"),r("4de4"),r("d3b7"),r("e439"),r("159b"),r("dbb4");function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}},7467:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r("d4ec"),i=r("bee2"),o=(r("d3b7"),r("e9c4"),function(){function t(){Object(n["a"])(this,t)}return Object(i["a"])(t,[{key:"getWorktimes",value:function(t){var e="page="+(t.page+1)+"&per_page="+t.rows,r=1==t.sortOrder?"asc":"desc";return e+="&order_by="+r,null!=t.sortField&&(e+="&sort_by="+t.sortField),t.filters.global.value&&(e+="&keyword="+t.filters.global.value),fetch("http://103.151.71.42/api/worktimes?"+e,{headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token")}}).then((function(t){return 401==t.status?{data:{redirectTo:"login"}}:t.json()})).then((function(t){return t.data}))}},{key:"getAllWorktimes",value:function(){return fetch("http://103.151.71.42/api/worktimes?response=array",{headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token")}}).then((function(t){return 401==t.status?{data:{redirectTo:"login"}}:t.json()})).then((function(t){return t.data}))}},{key:"createWorktime",value:function(t){return fetch("http://103.151.71.42/api/worktimes",{method:"POST",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)}).then((function(t){return 401==t.status?{redirectTo:"Login"}:t.json()}))}},{key:"updateWorktime",value:function(t){return fetch("http://103.151.71.42/api/worktimes/"+t.id,{method:"PUT",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)}).then((function(t){return 401==t.status?{redirectTo:"Login"}:t.json()}))}},{key:"deleteWorktime",value:function(t){return fetch("http://103.151.71.42/api/worktimes/"+t.id,{method:"DELETE",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)}).then((function(t){return 401==t.status?{redirectTo:"Login"}:t.json()}))}}]),t}())},"7db0":function(t,e,r){"use strict";var n=r("23e7"),i=r("b727").find,o=r("44d2"),a="find",c=!0;a in[]&&Array(1)[a]((function(){c=!1})),n({target:"Array",proto:!0,forced:c},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o(a)},b64b:function(t,e,r){var n=r("23e7"),i=r("7b0b"),o=r("df75"),a=r("d039"),c=a((function(){o(1)}));n({target:"Object",stat:!0,forced:c},{keys:function(t){return o(i(t))}})},bee2:function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}r.d(e,"a",(function(){return i}))},d4ec:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));r("d9e2");function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},dbb4:function(t,e,r){var n=r("23e7"),i=r("83ab"),o=r("56ef"),a=r("fc6a"),c=r("06cf"),u=r("8418");n({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(t){var e,r,n=a(t),i=c.f,s=o(n),l={},d=0;while(s.length>d)r=i(n,e=s[d++]),void 0!==r&&u(l,e,r);return l}})},e439:function(t,e,r){var n=r("23e7"),i=r("d039"),o=r("fc6a"),a=r("06cf").f,c=r("83ab"),u=i((function(){a(1)})),s=!c||u;n({target:"Object",stat:!0,forced:s,sham:!c},{getOwnPropertyDescriptor:function(t,e){return a(o(t),e)}})},fca4:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r("d4ec"),i=r("bee2"),o=(r("d3b7"),r("e9c4"),function(){function t(){Object(n["a"])(this,t)}return Object(i["a"])(t,[{key:"getWorkunits",value:function(t){var e="page="+(t.page+1)+"&per_page="+t.rows,r=1==t.sortOrder?"asc":"desc";return e+="&order_by="+r,null!=t.sortField&&(e+="&sort_by="+t.sortField),t.filters.global.value&&(e+="&keyword="+t.filters.global.value),fetch("http://103.151.71.42/api/workunits?"+e,{headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token")}}).then((function(t){return 401==t.status?{data:{redirectTo:"Login"}}:t.json()})).then((function(t){return t.data}))}},{key:"getWorkunit",value:function(t){return fetch("http://103.151.71.42/api/workunits/"+t,{headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token")}}).then((function(t){return 401==t.status?{data:{redirectTo:"login"}}:t.json()})).then((function(t){return t.data}))}},{key:"getPresences",value:function(t){return fetch("http://103.151.71.42/api/workunits/"+t+"/presences",{headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token")}}).then((function(t){return 401==t.status?{data:{redirectTo:"login"}}:t.json()})).then((function(t){return t.data}))}},{key:"updateWorkunit",value:function(t){return fetch("http://103.151.71.42/api/workunits/"+t.id+"/place",{method:"PATCH",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({lat:t.lat,lng:t.lng,radius:t.radius})}).then((function(t){return 401==t.status?{redirectTo:"Login"}:t.json()}))}},{key:"assignWorktime",value:function(t,e){return fetch("http://103.151.71.42/api/workunits/"+t.id+"/worktime",{method:"PATCH",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({worktime_id:e.worktime_id})}).then((function(t){return 401==t.status?{redirectTo:"Login"}:t.json()}))}},{key:"deleteWorktime",value:function(t,e){return fetch("http://103.151.71.42/api/workunits/"+t.id+"/worktime",{method:"DELETE",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({worktime_id:e.id})}).then((function(t){return 401==t.status?{redirectTo:"Login"}:t.json()}))}}]),t}())}}]);
//# sourceMappingURL=chunk-67d5bb6c.414a9fa5.js.map