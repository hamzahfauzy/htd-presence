"use strict";(self["webpackChunksakai_vue"]=self["webpackChunksakai_vue"]||[]).push([[80],{4956:function(e,t,a){a.d(t,{c:function(){return r}});class r{getEmployees(e,t=!1){var a="";if(e){a="page="+(e.page+1)+"&per_page="+e.rows;var r=1==e.sortOrder?"asc":"desc";a+="&order_by="+r,null!=e.sortField&&(a+="&sort_by="+e.sortField),e.filters.global.value&&(a+="&keyword="+e.filters.global.value)}var s=JSON.parse(localStorage.getItem("presence_user_data"));return s.workunit_id&&(a+="&workunit_id="+s.workunit_id),t&&(a+="&workunit_id="+t),fetch("https://sisapa.tanjungbalaikota.go.id/api/employees?"+a,{headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token")}}).then((e=>401==e.status?{data:{redirectTo:"login"}}:e.json())).then((e=>e.data))}getEmployeesReport(e,t){var a="";if(e){a="page="+(e.page+1)+"&per_page="+e.rows;var r=1==e.sortOrder?"asc":"desc";a+="&order_by="+r,null!=e.sortField&&(a+="&sort_by="+e.sortField),e.filters.global.value&&(a+="&keyword="+e.filters.global.value),null!=e.date_start&&null!=e.date_end&&(a+="&date_start="+e.date_start+"&date_end="+e.date_end)}return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/reports/"+t+"?"+a,{headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token")}}).then((e=>401==e.status?{data:{redirectTo:"login"}}:e.json())).then((e=>e.data))}getEmployeesReportDetail(e,t){var a="";if(e){a="page="+(e.page+1)+"&per_page="+e.rows;var r=1==e.sortOrder?"asc":"desc";a+="&order_by="+r,null!=e.sortField&&(a+="&sort_by="+e.sortField),e.filters.global.value&&(a+="&keyword="+e.filters.global.value),null!=e.date_start&&null!=e.date_end&&(a+="&date_start="+e.date_start+"&date_end="+e.date_end)}return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/report-details/"+t+"?"+a,{headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token")}}).then((e=>401==e.status?{data:{redirectTo:"login"}}:e.json())).then((e=>e.data))}getEmployeesReportPdfLink(e,t){var a="";if(e){var r=1==e.sortOrder?"asc":"desc";a+="&order_by="+r,null!=e.sortField&&(a+="&sort_by="+e.sortField),e.filters.global.value&&(a+="&keyword="+e.filters.global.value),null!=e.date_start&&null!=e.date_end&&(a+="&date_start="+e.date_start+"&date_end="+e.date_end)}return"https://sisapa.tanjungbalaikota.go.id/api/employees/report-pdf/"+t+"?"+a}getEmployeesReportDetailPdfLink(e,t){var a="";if(e){var r=1==e.sortOrder?"asc":"desc";a+="&order_by="+r,null!=e.sortField&&(a+="&sort_by="+e.sortField),e.filters.global.value&&(a+="&keyword="+e.filters.global.value),null!=e.date_start&&null!=e.date_end&&(a+="&date_start="+e.date_start+"&date_end="+e.date_end)}return"https://sisapa.tanjungbalaikota.go.id/api/employees/report-detail-pdf/"+t+"?"+a}getEmployee(e){return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/"+e,{headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token")}}).then((e=>401==e.status?{data:{redirectTo:"login"}}:e.json())).then((e=>e.data))}getPresence(e,t){return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/"+e+"/presences/"+t,{headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token")}}).then((e=>401==e.status?{data:{redirectTo:"login"}}:e.json())).then((e=>e.data))}updateEmployee(e){return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/"+e.id+"/place",{method:"PATCH",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({lat:e.lat,lng:e.lng,radius:e.radius})}).then((e=>401==e.status?{redirectTo:"Login"}:e.json()))}updateRole(e,t){var a={...e};return a.role=t,fetch("https://sisapa.tanjungbalaikota.go.id/api/users/"+e.id,{method:"PUT",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(a)}).then((e=>401==e.status?{redirectTo:"Login"}:e.json()))}addPlace(e,t){return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/"+e.id+"/place",{method:"POST",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)}).then((e=>401==e.status?{redirectTo:"Login"}:e.json()))}deletePlace(e,t){return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/"+e.id+"/place",{method:"DELETE",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({place_id:t.id})}).then((e=>401==e.status?{redirectTo:"Login"}:e.json()))}patchPlace(e){return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/"+e.id+"/place",{method:"PATCH",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"}}).then((e=>401==e.status?{redirectTo:"Login"}:e.json()))}patchAndroid(e){return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/"+e.id+"/android-user",{method:"PATCH",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"}}).then((e=>401==e.status?{redirectTo:"Login"}:e.json()))}resetDevice(e){return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/"+e.id+"/reset-device",{method:"POST",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"}}).then((e=>401==e.status?{redirectTo:"Login"}:e.json()))}resetPassword(e){return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/"+e.id+"/reset-password",{method:"POST",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"}}).then((e=>401==e.status?{redirectTo:"Login"}:e.json()))}addWorktime(e,t){return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/"+e.id+"/worktime",{method:"POST",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)}).then((e=>401==e.status?{redirectTo:"Login"}:e.json()))}deleteWorktime(e,t){return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/"+e.id+"/worktime",{method:"DELETE",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({worktime_id:t.id,date_start:t.pivot.date_start,date_end:t.pivot.date_end})}).then((e=>401==e.status?{redirectTo:"Login"}:e.json()))}actionPresence(e,t){return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/"+t.employee_id+"/presences/"+t.id,{method:"PATCH",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({status:e})}).then((e=>401==e.status?{redirectTo:"Login"}:e.json()))}insertPresence(e,t){return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/"+e+"/presences",{method:"POST",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token")},body:t}).then((e=>401==e.status?{redirectTo:"Login"}:e.json()))}}},7080:function(e,t,a){a.r(t),a.d(t,{default:function(){return te}});var r=a(6760),s=a(8752);const o={class:"grid"},n={class:"col-12"},i={class:"card"},l={class:"flex justify-content-between mb-3 align-items-center"},d={class:"font-medium text-3xl text-900"},p={key:0,class:"list-none p-0 m-0"},c={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},u=(0,r.QD)("div",{class:"text-500 w-6 md:w-2 font-medium"},"Pegawai",-1),g={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},m={key:0,class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},h=(0,r.QD)("div",{class:"text-500 w-6 md:w-2 font-medium"},"Jadwal",-1),f={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},y={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},_=(0,r.QD)("div",{class:"text-500 w-6 md:w-2 font-medium"},"OPD",-1),w={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},x={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},k=(0,r.QD)("div",{class:"text-500 w-6 md:w-2 font-medium"},"Tipe",-1),b={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},v={key:1,class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},j=(0,r.QD)("div",{class:"text-500 w-6 md:w-2 font-medium"},"Di lokasi",-1),D={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},T={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},S=(0,r.QD)("div",{class:"text-500 w-6 md:w-2 font-medium"},"Status",-1),Q={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},z={key:2,class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},A=(0,r.QD)("div",{class:"text-500 w-6 md:w-2 font-medium"},"Waktu Mulai",-1),W={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},I={key:3,class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},P=(0,r.QD)("div",{class:"text-500 w-6 md:w-2 font-medium"},"Waktu Selesai",-1),C={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},F={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},B=(0,r.QD)("div",{class:"text-500 w-6 md:w-2 font-medium"},"Tanggal",-1),O={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},L={key:4,class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},E=(0,r.QD)("div",{class:"text-500 w-6 md:w-2 font-medium"},"Selfi",-1),U={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},J=["src"],N={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},R=(0,r.QD)("div",{class:"text-500 w-6 md:w-2 font-medium"},"Lampiran",-1),$={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},H=["href"],Y={key:5,class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},q=(0,r.QD)("div",{class:"text-500 w-6 md:w-2 font-medium"},"Lokasi",-1),M={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},G=["src"];function K(e,t,a,K,V,X){const Z=(0,r.E1)("Button");return(0,r.Wz)(),(0,r.An)("div",o,[(0,r.QD)("div",n,[(0,r.QD)("div",i,[(0,r.QD)("div",l,[(0,r.QD)("div",d,"Detail "+(0,s.WA)(V.presence.presence_id?"Absensi":V.presence.type.includes("tugas")?V.presence.type:"Cuti"),1),(0,r.QD)("div",null,["diajukan"==V.presence.status?((0,r.Wz)(),(0,r.Az)(Z,{key:0,icon:"pi pi-check",class:"p-button-rounded p-button-success mr-2",onClick:t[0]||(t[0]=e=>X.action("setujui",V.presence))})):(0,r.g1)("",!0),"diajukan"==V.presence.status?((0,r.Wz)(),(0,r.Az)(Z,{key:1,icon:"pi pi-times",class:"p-button-rounded p-button-danger mr-2",onClick:t[1]||(t[1]=e=>X.action("tolak",V.presence))})):(0,r.g1)("",!0)])]),V.presence.employee?((0,r.Wz)(),(0,r.An)("ul",p,[(0,r.QD)("li",c,[u,(0,r.QD)("div",g,(0,s.WA)(V.presence.employee.nip+" - "+V.presence.employee.name),1)]),V.presence.presence_id?((0,r.Wz)(),(0,r.An)("li",m,[h,(0,r.QD)("div",f,(0,s.WA)(V.presence.worktime_item?.name),1)])):(0,r.g1)("",!0),(0,r.QD)("li",y,[_,(0,r.QD)("div",w,(0,s.WA)(V.presence.workunit.name),1)]),(0,r.QD)("li",x,[k,(0,r.QD)("div",b,(0,s.WA)(V.presence.type),1)]),V.presence.presence_id?((0,r.Wz)(),(0,r.An)("li",v,[j,(0,r.QD)("div",D,(0,s.WA)(1==V.presence.in_location?"Ya":"Tidak"),1)])):(0,r.g1)("",!0),(0,r.QD)("li",T,[S,(0,r.QD)("div",Q,(0,s.WA)(V.presence.status),1)]),null==V.presence.presence_id||"tugas luar"==V.presence.type?((0,r.Wz)(),(0,r.An)("li",z,[A,(0,r.QD)("div",W,(0,s.WA)(V.presence.started_at),1)])):(0,r.g1)("",!0),null==V.presence.presence_id||"tugas luar"==V.presence.type?((0,r.Wz)(),(0,r.An)("li",I,[P,(0,r.QD)("div",C,(0,s.WA)(V.presence.finished_at),1)])):(0,r.g1)("",!0),(0,r.QD)("li",F,[B,(0,r.QD)("div",O,(0,s.WA)(V.presence.created_at),1)]),V.presence.presence_id?((0,r.Wz)(),(0,r.An)("li",L,[E,(0,r.QD)("div",U,[V.presence.pic_url?((0,r.Wz)(),(0,r.An)("img",{key:0,src:V.storage_url+V.presence.pic_url,style:{width:"250px"}},null,8,J)):(0,r.g1)("",!0)])])):(0,r.g1)("",!0),(0,r.QD)("li",N,[R,(0,r.QD)("div",$,[V.presence.attachment_url?((0,r.Wz)(),(0,r.An)("a",{key:0,href:V.storage_url+V.presence.attachment_url,target:"_blank"},"Download",8,H)):(0,r.g1)("",!0)])]),V.presence.presence_id?((0,r.Wz)(),(0,r.An)("li",Y,[q,(0,r.QD)("div",M,[(0,r.QD)("iframe",{width:"500",height:"300",src:"//maps.google.com/maps?q="+V.presence.lat+","+V.presence.lng+"&z=15&output=embed",allowfullscreen:"",style:{border:"0"},referrerpolicy:"no-referrer-when-downgrade"},null,8,G)])])):(0,r.g1)("",!0)])):(0,r.g1)("",!0)])])])}var V=a(4956),X={data(){return{employeeId:null,presenceId:null,presence:{},submitted:!1,storage_url:"https://sisapa.tanjungbalaikota.go.id/storage/"}},employeeService:null,created(){this.presenceId=this.$route.params.id,this.employeeId=this.$route.params.employee_id,this.employeeService=new V.c,this.initData()},methods:{initData(){this.employeeService.getPresence(this.employeeId,this.presenceId).then((e=>{this.presence=e,console.log(e)}))},action(e,t){this.$swal({title:"Apakah anda yakin akan "+e+" data ini ?",showCancelButton:!0,confirmButtonText:"Ya"}).then((a=>{a.isConfirmed&&this.employeeService.actionPresence("di"+e,t).then((e=>{e.success?(this.$swal({icon:"success",title:"Success",text:e.message}),this.initData()):this.$swal({icon:"error",title:"Oops...",text:e.message})}))}))}}},Z=a(8152);const ee=(0,Z.c)(X,[["render",K]]);var te=ee}}]);
//# sourceMappingURL=80.4a21fa17.js.map