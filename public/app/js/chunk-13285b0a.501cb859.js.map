{"version":3,"sources":["webpack:///./src/service/EmployeeService.js","webpack:///./src/pages/presences/Detail.vue","webpack:///./src/pages/presences/Detail.vue?91a2"],"names":["EmployeeService","getEmployees","lazyParams","workunit_id","params","page","rows","order_by","sortOrder","sortField","filters","global","value","userData","JSON","parse","localStorage","getItem","fetch","process","headers","then","res","status","data","redirectTo","json","d","getEmployeesReport","date_start","date_end","getEmployeesReportDetail","getEmployeesReportPdfLink","getEmployeesReportDetailPdfLink","getEmployee","id","getPresence","presence_id","updateEmployee","employee","method","body","stringify","lat","lng","radius","updateRole","user","role","_user","addPlace","deletePlace","place_id","patchPlace","patchAndroid","resetDevice","addWorktime","deleteWorktime","worktime_id","actionPresence","employee_id","insertPresence","class","_createElementVNode","_createElementBlock","_toDisplayString","$data","type","_createBlock","_component_Button","icon","onClick","$options","_hoisted_8","nip","name","_hoisted_11","worktime_item","_hoisted_14","workunit","_hoisted_17","_hoisted_20","in_location","_hoisted_23","_hoisted_26","started_at","_hoisted_29","finished_at","_hoisted_32","created_at","_hoisted_35","pic_url","src","style","_hoisted_39","attachment_url","href","target","_hoisted_41","_hoisted_43","width","height","allowfullscreen","referrerpolicy","employeeId","presenceId","presence","submitted","storage_url","employeeService","created","this","$route","initData","methods","console","log","action","$swal","title","showCancelButton","confirmButtonText","result","isConfirmed","success","text","message","__exports__","render"],"mappings":"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","file":"js/chunk-13285b0a.501cb859.js","sourcesContent":["export default class EmployeeService {\r\n\r\n\tgetEmployees(lazyParams, workunit_id = false) {\r\n        // const queryParams = params ? Object.keys(params).map(k => encodeURIComponent(k) + '=' + encodeURIComponent(params[k])).join('&') : '';\r\n        \r\n        var params = ''\r\n        if(lazyParams){\r\n            params = 'page='+(lazyParams.page+1)+'&per_page='+lazyParams.rows\r\n            var order_by = lazyParams.sortOrder == 1 ? 'asc' : 'desc';\r\n            params +='&order_by='+order_by\r\n            if(lazyParams.sortField != null)\r\n            {\r\n                params += '&sort_by='+lazyParams.sortField\r\n            }\r\n    \r\n            if(lazyParams.filters.global.value)\r\n            {\r\n                params += '&keyword='+lazyParams.filters.global.value\r\n            }\r\n        }\r\n\r\n        var userData = JSON.parse(localStorage.getItem('presence_user_data'))\r\n        if(userData.workunit_id)\r\n        {\r\n            params += '&workunit_id='+userData.workunit_id;\r\n        }\r\n\r\n        if(workunit_id)\r\n        {\r\n            params += '&workunit_id='+workunit_id;\r\n        }\r\n        \r\n\t\treturn fetch(process.env.VUE_APP_API_URL+'employees?' + params,{\r\n            headers:{\r\n                'authorization' : 'Bearer '+localStorage.getItem('presence_app_token')\r\n            }\r\n        })\r\n        .then(res => {\r\n            if(res.status == 401)\r\n            {\r\n                return {data:{redirectTo:\"login\"}};\r\n            }\r\n            return res.json()\r\n        })\r\n        .then(d => d.data);\r\n    }\r\n\r\n    getEmployeesReport(lazyParams,workunit_id) {\r\n        // const queryParams = params ? Object.keys(params).map(k => encodeURIComponent(k) + '=' + encodeURIComponent(params[k])).join('&') : '';\r\n        \r\n        var params = ''\r\n        if(lazyParams){\r\n            params = 'page='+(lazyParams.page+1)+'&per_page='+lazyParams.rows\r\n            var order_by = lazyParams.sortOrder == 1 ? 'asc' : 'desc';\r\n            params +='&order_by='+order_by\r\n            if(lazyParams.sortField != null)\r\n            {\r\n                params += '&sort_by='+lazyParams.sortField\r\n            }\r\n    \r\n            if(lazyParams.filters.global.value)\r\n            {\r\n                params += '&keyword='+lazyParams.filters.global.value\r\n            }\r\n\r\n            if(lazyParams.date_start != null && lazyParams.date_end != null)\r\n            {\r\n                params += '&date_start='+lazyParams.date_start+'&date_end='+lazyParams.date_end\r\n            }\r\n        }\r\n        \r\n\t\treturn fetch(process.env.VUE_APP_API_URL+'employees/reports/'+workunit_id+'?' + params,{\r\n            headers:{\r\n                'authorization' : 'Bearer '+localStorage.getItem('presence_app_token')\r\n            }\r\n        })\r\n        .then(res => {\r\n            if(res.status == 401)\r\n            {\r\n                return {data:{redirectTo:\"login\"}};\r\n            }\r\n            return res.json()\r\n        })\r\n        .then(d => d.data);\r\n    }\r\n\r\n    getEmployeesReportDetail(lazyParams,workunit_id) {\r\n        // const queryParams = params ? Object.keys(params).map(k => encodeURIComponent(k) + '=' + encodeURIComponent(params[k])).join('&') : '';\r\n        \r\n        var params = ''\r\n        if(lazyParams){\r\n            params = 'page='+(lazyParams.page+1)+'&per_page='+lazyParams.rows\r\n            var order_by = lazyParams.sortOrder == 1 ? 'asc' : 'desc';\r\n            params +='&order_by='+order_by\r\n            if(lazyParams.sortField != null)\r\n            {\r\n                params += '&sort_by='+lazyParams.sortField\r\n            }\r\n    \r\n            if(lazyParams.filters.global.value)\r\n            {\r\n                params += '&keyword='+lazyParams.filters.global.value\r\n            }\r\n\r\n            if(lazyParams.date_start != null && lazyParams.date_end != null)\r\n            {\r\n                params += '&date_start='+lazyParams.date_start+'&date_end='+lazyParams.date_end\r\n            }\r\n        }\r\n        \r\n\t\treturn fetch(process.env.VUE_APP_API_URL+'employees/report-details/'+workunit_id+'?' + params,{\r\n            headers:{\r\n                'authorization' : 'Bearer '+localStorage.getItem('presence_app_token')\r\n            }\r\n        })\r\n        .then(res => {\r\n            if(res.status == 401)\r\n            {\r\n                return {data:{redirectTo:\"login\"}};\r\n            }\r\n            return res.json()\r\n        })\r\n        .then(d => d.data);\r\n    }\r\n\r\n    getEmployeesReportPdfLink(lazyParams,workunit_id) {\r\n        // const queryParams = params ? Object.keys(params).map(k => encodeURIComponent(k) + '=' + encodeURIComponent(params[k])).join('&') : '';\r\n        \r\n        var params = ''\r\n        if(lazyParams){\r\n            var order_by = lazyParams.sortOrder == 1 ? 'asc' : 'desc';\r\n            params +='&order_by='+order_by\r\n            if(lazyParams.sortField != null)\r\n            {\r\n                params += '&sort_by='+lazyParams.sortField\r\n            }\r\n    \r\n            if(lazyParams.filters.global.value)\r\n            {\r\n                params += '&keyword='+lazyParams.filters.global.value\r\n            }\r\n\r\n            if(lazyParams.date_start != null && lazyParams.date_end != null)\r\n            {\r\n                params += '&date_start='+lazyParams.date_start+'&date_end='+lazyParams.date_end\r\n            }\r\n        }\r\n        \r\n\t\treturn (process.env.VUE_APP_API_URL+'employees/report-pdf/'+workunit_id+'?' + params)\r\n    }\r\n\r\n    getEmployeesReportDetailPdfLink(lazyParams,workunit_id) {\r\n        // const queryParams = params ? Object.keys(params).map(k => encodeURIComponent(k) + '=' + encodeURIComponent(params[k])).join('&') : '';\r\n        \r\n        var params = ''\r\n        if(lazyParams){\r\n            var order_by = lazyParams.sortOrder == 1 ? 'asc' : 'desc';\r\n            params +='&order_by='+order_by\r\n            if(lazyParams.sortField != null)\r\n            {\r\n                params += '&sort_by='+lazyParams.sortField\r\n            }\r\n    \r\n            if(lazyParams.filters.global.value)\r\n            {\r\n                params += '&keyword='+lazyParams.filters.global.value\r\n            }\r\n\r\n            if(lazyParams.date_start != null && lazyParams.date_end != null)\r\n            {\r\n                params += '&date_start='+lazyParams.date_start+'&date_end='+lazyParams.date_end\r\n            }\r\n        }\r\n        \r\n\t\treturn (process.env.VUE_APP_API_URL+'employees/report-detail-pdf/'+workunit_id+'?' + params)\r\n    }\r\n\r\n    getEmployee(id) {\r\n\t\treturn fetch(process.env.VUE_APP_API_URL+'employees/' + id,{\r\n            headers:{\r\n                'authorization' : 'Bearer '+localStorage.getItem('presence_app_token')\r\n            }\r\n        })\r\n        .then(res => {\r\n            if(res.status == 401)\r\n            {\r\n                return {data:{redirectTo:\"login\"}};\r\n            }\r\n            return res.json()\r\n        })\r\n        .then(d => d.data);\r\n    }\r\n\r\n    getPresence(id,presence_id) {\r\n\t\treturn fetch(process.env.VUE_APP_API_URL+'employees/' + id + '/presences/'+presence_id,{\r\n            headers:{\r\n                'authorization' : 'Bearer '+localStorage.getItem('presence_app_token')\r\n            }\r\n        })\r\n        .then(res => {\r\n            if(res.status == 401)\r\n            {\r\n                return {data:{redirectTo:\"login\"}};\r\n            }\r\n            return res.json()\r\n        })\r\n        .then(d => d.data);\r\n    }\r\n\r\n    updateEmployee(employee){\r\n        return fetch(process.env.VUE_APP_API_URL+'employees/'+employee.id+'/place',{\r\n            method:'PATCH',\r\n            headers:{\r\n                'authorization' : 'Bearer '+localStorage.getItem('presence_app_token'),\r\n                'Content-type': 'application/json; charset=UTF-8',\r\n            },\r\n            body:JSON.stringify({\r\n                lat:employee.lat,\r\n                lng:employee.lng,\r\n                radius:employee.radius,\r\n            })\r\n        })\r\n        .then(res => {\r\n            if(res.status == 401)\r\n            {\r\n                return {redirectTo:\"Login\"};\r\n            }\r\n            return res.json()\r\n        })\r\n    }\r\n\r\n    updateRole(user, role){\r\n        var _user = {...user}\r\n        _user.role = role\r\n        return fetch(process.env.VUE_APP_API_URL+'users/'+user.id,{\r\n            method:'PUT',\r\n            headers:{\r\n                'authorization' : 'Bearer '+localStorage.getItem('presence_app_token'),\r\n                'Content-type': 'application/json; charset=UTF-8',\r\n            },\r\n            body:JSON.stringify(_user)\r\n        })\r\n        .then(res => {\r\n            if(res.status == 401)\r\n            {\r\n                return {redirectTo:\"Login\"};\r\n            }\r\n            return res.json()\r\n        })\r\n    }\r\n\r\n    addPlace(employee, data){\r\n        return fetch(process.env.VUE_APP_API_URL+'employees/'+employee.id+'/place',{\r\n            method:'POST',\r\n            headers:{\r\n                'authorization' : 'Bearer '+localStorage.getItem('presence_app_token'),\r\n                'Content-type': 'application/json; charset=UTF-8',\r\n            },\r\n            body:JSON.stringify(data)\r\n        })\r\n        .then(res => {\r\n            if(res.status == 401)\r\n            {\r\n                return {redirectTo:\"Login\"};\r\n            }\r\n            return res.json()\r\n        })\r\n    }\r\n\r\n    deletePlace(employee, data){\r\n        return fetch(process.env.VUE_APP_API_URL+'employees/'+employee.id+'/place',{\r\n            method:'DELETE',\r\n            headers:{\r\n                'authorization' : 'Bearer '+localStorage.getItem('presence_app_token'),\r\n                'Content-type': 'application/json; charset=UTF-8',\r\n            },\r\n            body:JSON.stringify({\r\n                place_id:data.id\r\n            })\r\n        })\r\n        .then(res => {\r\n            if(res.status == 401)\r\n            {\r\n                return {redirectTo:\"Login\"};\r\n            }\r\n            return res.json()\r\n        })\r\n    }\r\n\r\n    patchPlace(employee){\r\n        return fetch(process.env.VUE_APP_API_URL+'employees/'+employee.id+'/place',{\r\n            method:'PATCH',\r\n            headers:{\r\n                'authorization' : 'Bearer '+localStorage.getItem('presence_app_token'),\r\n                'Content-type': 'application/json; charset=UTF-8',\r\n            },\r\n        })\r\n        .then(res => {\r\n            if(res.status == 401)\r\n            {\r\n                return {redirectTo:\"Login\"};\r\n            }\r\n            return res.json()\r\n        })\r\n    }\r\n\r\n    patchAndroid(employee){\r\n        return fetch(process.env.VUE_APP_API_URL+'employees/'+employee.id+'/android-user',{\r\n            method:'PATCH',\r\n            headers:{\r\n                'authorization' : 'Bearer '+localStorage.getItem('presence_app_token'),\r\n                'Content-type': 'application/json; charset=UTF-8',\r\n            },\r\n        })\r\n        .then(res => {\r\n            if(res.status == 401)\r\n            {\r\n                return {redirectTo:\"Login\"};\r\n            }\r\n            return res.json()\r\n        })\r\n    }\r\n\r\n    resetDevice(employee){\r\n        return fetch(process.env.VUE_APP_API_URL+'employees/'+employee.id+'/reset-device',{\r\n            method:'POST',\r\n            headers:{\r\n                'authorization' : 'Bearer '+localStorage.getItem('presence_app_token'),\r\n                'Content-type': 'application/json; charset=UTF-8',\r\n            },\r\n        })\r\n        .then(res => {\r\n            if(res.status == 401)\r\n            {\r\n                return {redirectTo:\"Login\"};\r\n            }\r\n            return res.json()\r\n        })\r\n    }\r\n\r\n    addWorktime(employee, data){\r\n        return fetch(process.env.VUE_APP_API_URL+'employees/'+employee.id+'/worktime',{\r\n            method:'POST',\r\n            headers:{\r\n                'authorization' : 'Bearer '+localStorage.getItem('presence_app_token'),\r\n                'Content-type': 'application/json; charset=UTF-8',\r\n            },\r\n            body:JSON.stringify(data)\r\n        })\r\n        .then(res => {\r\n            if(res.status == 401)\r\n            {\r\n                return {redirectTo:\"Login\"};\r\n            }\r\n            return res.json()\r\n        })\r\n    }\r\n\r\n    deleteWorktime(employee, data){\r\n        return fetch(process.env.VUE_APP_API_URL+'employees/'+employee.id+'/worktime',{\r\n            method:'DELETE',\r\n            headers:{\r\n                'authorization' : 'Bearer '+localStorage.getItem('presence_app_token'),\r\n                'Content-type': 'application/json; charset=UTF-8',\r\n            },\r\n            body:JSON.stringify({\r\n                worktime_id:data.id\r\n            })\r\n        })\r\n        .then(res => {\r\n            if(res.status == 401)\r\n            {\r\n                return {redirectTo:\"Login\"};\r\n            }\r\n            return res.json()\r\n        })\r\n    }\r\n\r\n    actionPresence(status, data){\r\n        return fetch(process.env.VUE_APP_API_URL+'employees/'+data.employee_id+'/presences/'+data.id,{\r\n            method:'PATCH',\r\n            headers:{\r\n                'authorization' : 'Bearer '+localStorage.getItem('presence_app_token'),\r\n                'Content-type': 'application/json; charset=UTF-8',\r\n            },\r\n            body:JSON.stringify({\r\n                status:status\r\n            })\r\n        })\r\n        .then(res => {\r\n            if(res.status == 401)\r\n            {\r\n                return {redirectTo:\"Login\"};\r\n            }\r\n            return res.json()\r\n        })\r\n    }\r\n\r\n    insertPresence(employee_id, data){\r\n        return fetch(process.env.VUE_APP_API_URL+'employees/'+employee_id+'/presences',{\r\n            method:'POST',\r\n            headers:{\r\n                'authorization' : 'Bearer '+localStorage.getItem('presence_app_token'),\r\n                // 'Content-type': 'multipart/form-data',\r\n            },\r\n            body:data\r\n        })\r\n        .then(res => {\r\n            if(res.status == 401)\r\n            {\r\n                return {redirectTo:\"Login\"};\r\n            }\r\n            return res.json()\r\n        })\r\n    }\r\n\t\r\n}","<template>\r\n    <div class=\"grid\">\r\n        <div class=\"col-12\">\r\n            <div class=\"card\">\r\n                <div class=\"flex justify-content-between mb-3 align-items-center\">\r\n                    <div class=\"font-medium text-3xl text-900\">Detail {{ presence.presence_id ? \"Absensi\" : (presence.type == 'tugas luar' ? 'Tugas Luar' : \"Cuti\")}}</div>\r\n                    <div>\r\n                        <Button icon=\"pi pi-check\" class=\"p-button-rounded p-button-success mr-2\"\r\n                            v-if=\"presence.status == 'diajukan'\" @click=\"action('setujui', presence)\" />\r\n                        <Button icon=\"pi pi-times\" class=\"p-button-rounded p-button-danger mr-2\"\r\n                            v-if=\"presence.status == 'diajukan'\" @click=\"action('tolak', presence)\" />\r\n                    </div>\r\n                </div>\r\n                <ul class=\"list-none p-0 m-0\" v-if=\"presence.employee\">\r\n                    <li class=\"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap\">\r\n                        <div class=\"text-500 w-6 md:w-2 font-medium\">Pegawai</div>\r\n                        <div class=\"text-900 w-full md:w-8 md:flex-order-0 flex-order-1\">\r\n                            {{presence.employee.nip+' - '+presence.employee.name}}\r\n                        </div>\r\n                    </li>\r\n                    <li v-if=\"presence.presence_id\"\r\n                        class=\"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap\">\r\n                        <div class=\"text-500 w-6 md:w-2 font-medium\">Jadwal</div>\r\n                        <div class=\"text-900 w-full md:w-8 md:flex-order-0 flex-order-1\">\r\n                            {{ presence.worktime_item?.name }}\r\n                        </div>\r\n                    </li>\r\n                    <li class=\"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap\">\r\n                        <div class=\"text-500 w-6 md:w-2 font-medium\">OPD</div>\r\n                        <div class=\"text-900 w-full md:w-8 md:flex-order-0 flex-order-1\">\r\n                            {{presence.workunit.name}}\r\n                        </div>\r\n                    </li>\r\n                    <li class=\"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap\">\r\n                        <div class=\"text-500 w-6 md:w-2 font-medium\">Tipe</div>\r\n                        <div class=\"text-900 w-full md:w-8 md:flex-order-0 flex-order-1\">\r\n                            {{presence.type}}\r\n                        </div>\r\n                    </li>\r\n                    <li v-if=\"presence.presence_id\"\r\n                        class=\"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap\">\r\n                        <div class=\"text-500 w-6 md:w-2 font-medium\">Di lokasi</div>\r\n                        <div class=\"text-900 w-full md:w-8 md:flex-order-0 flex-order-1\">\r\n                            {{presence.in_location == 1 ? \"Ya\" : \"Tidak\"}}\r\n                        </div>\r\n                    </li>\r\n                    <li class=\"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap\">\r\n                        <div class=\"text-500 w-6 md:w-2 font-medium\">Status</div>\r\n                        <div class=\"text-900 w-full md:w-8 md:flex-order-0 flex-order-1\">\r\n                            {{presence.status}}\r\n                        </div>\r\n                    </li>\r\n                    <li v-if=\"presence.presence_id == null || presence.type == 'tugas luar'\"\r\n                        class=\"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap\">\r\n                        <div class=\"text-500 w-6 md:w-2 font-medium\">Waktu Mulai</div>\r\n                        <div class=\"text-900 w-full md:w-8 md:flex-order-0 flex-order-1\">\r\n                            {{presence.started_at}}\r\n                        </div>\r\n                    </li>\r\n                    <li v-if=\"presence.presence_id == null || presence.type == 'tugas luar'\"\r\n                        class=\"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap\">\r\n                        <div class=\"text-500 w-6 md:w-2 font-medium\">Waktu Selesai</div>\r\n                        <div class=\"text-900 w-full md:w-8 md:flex-order-0 flex-order-1\">\r\n                            {{presence.finished_at}}\r\n                        </div>\r\n                    </li>\r\n                    <li class=\"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap\">\r\n                        <div class=\"text-500 w-6 md:w-2 font-medium\">Tanggal</div>\r\n                        <div class=\"text-900 w-full md:w-8 md:flex-order-0 flex-order-1\">\r\n                            {{presence.created_at}}\r\n                        </div>\r\n                    </li>\r\n                    <li v-if=\"presence.presence_id\"\r\n                        class=\"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap\">\r\n                        <div class=\"text-500 w-6 md:w-2 font-medium\">Selfi</div>\r\n                        <div class=\"text-900 w-full md:w-8 md:flex-order-0 flex-order-1\">\r\n                            <img :src=\"storage_url+presence.pic_url\" v-if=\"presence.pic_url\" style=\"width:250px\">\r\n                        </div>\r\n                    </li>\r\n                    <li class=\"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap\">\r\n                        <div class=\"text-500 w-6 md:w-2 font-medium\">Lampiran</div>\r\n                        <div class=\"text-900 w-full md:w-8 md:flex-order-0 flex-order-1\">\r\n                            <a :href=\"storage_url+presence.attachment_url\" target=\"_blank\"\r\n                                v-if=\"presence.attachment_url\">Download</a>\r\n                        </div>\r\n                    </li>\r\n                    <li v-if=\"presence.presence_id\"\r\n                        class=\"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap\">\r\n                        <div class=\"text-500 w-6 md:w-2 font-medium\">Lokasi</div>\r\n                        <div class=\"text-900 w-full md:w-8 md:flex-order-0 flex-order-1\">\r\n                            <iframe width=\"500\" height=\"300\"\r\n                                :src=\"'//maps.google.com/maps?q=' + presence.lat + ',' + presence.lng +'&z=15&output=embed'\"\r\n                                allowfullscreen style=\"border:0\" referrerpolicy=\"no-referrer-when-downgrade\"></iframe>\r\n                        </div>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport EmployeeService from '../../service/EmployeeService'\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            employeeId:null,\r\n            presenceId:null,\r\n            presence:{},\r\n            submitted:false,\r\n            storage_url:process.env.VUE_APP_STORAGE_URL\r\n        }\r\n    },\r\n    employeeService: null,\r\n    created() {\r\n        this.presenceId = this.$route.params.id\r\n        this.employeeId = this.$route.params.employee_id\r\n        this.employeeService = new EmployeeService();\r\n        this.initData()\r\n    },\r\n    methods:{\r\n        initData(){\r\n            this.employeeService.getPresence(this.employeeId,this.presenceId).then(d => {\r\n                this.presence = d\r\n                console.log(d)\r\n            })\r\n        },\r\n        action(status, data) {\r\n            this.$swal({\r\n                title: 'Apakah anda yakin akan ' + status + ' data ini ?',\r\n                showCancelButton: true,\r\n                confirmButtonText: 'Ya',\r\n            }).then((result) => {\r\n                if (result.isConfirmed) {\r\n                    this.employeeService.actionPresence('di' + status, data)\r\n                        .then(res => {\r\n                            if (!res.success) {\r\n                                this.$swal({\r\n                                    icon: 'error',\r\n                                    title: 'Oops...',\r\n                                    text: res.message,\r\n                                })\r\n                            }\r\n                            else {\r\n                                this.$swal({\r\n                                    icon: 'success',\r\n                                    title: 'Success',\r\n                                    text: res.message\r\n                                })\r\n                                this.initData()\r\n                            }\r\n                        })\r\n                }\r\n            })\r\n        },\r\n    }\r\n}\r\n</script>","import { render } from \"./Detail.vue?vue&type=template&id=0e2b66b6\"\nimport script from \"./Detail.vue?vue&type=script&lang=js\"\nexport * from \"./Detail.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\Project\\\\DSI\\\\htd-presence-fe\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}