(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-27d913c0"],{"172d":function(e,t,i){"use strict";i.r(t);var r=i("7a23");const a={class:"grid"},o={class:"col-12"},s={class:"card"},n=Object(r["j"])("div",{class:"font-medium text-3xl text-900 mb-3"},"Detail OPD",-1),l={class:"list-none p-0 m-0"},c={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},d=Object(r["j"])("div",{class:"text-500 w-6 md:w-2 font-medium"},"Nama",-1),u={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},m={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},k=Object(r["j"])("div",{class:"text-500 w-6 md:w-2 font-medium"},"Latitude",-1),p={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},h={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},b=Object(r["j"])("div",{class:"text-500 w-6 md:w-2 font-medium"},"Longitude",-1),w={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},j={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},g=Object(r["j"])("div",{class:"text-500 w-6 md:w-2 font-medium"},"Radius",-1),f={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"};function O(e,t,i,O,v,_){const y=Object(r["H"])("DetailWorktime");return Object(r["z"])(),Object(r["i"])("div",a,[Object(r["j"])("div",o,[Object(r["j"])("div",s,[n,Object(r["j"])("ul",l,[Object(r["j"])("li",c,[d,Object(r["j"])("div",u,Object(r["L"])(v.workunit.name),1)]),Object(r["j"])("li",m,[k,Object(r["j"])("div",p,Object(r["L"])(v.workunit.lat),1)]),Object(r["j"])("li",h,[b,Object(r["j"])("div",w,Object(r["L"])(v.workunit.lng),1)]),Object(r["j"])("li",j,[g,Object(r["j"])("div",f,Object(r["L"])(v.workunit.radius),1)])])])]),0!=Object.keys(v.workunit).length?(Object(r["z"])(),Object(r["g"])(y,{key:0,workunit:v.workunit,workunitService:e.workunitService},null,8,["workunit","workunitService"])):Object(r["h"])("",!0)])}var v=i("fca4");const _={class:"col-12"},y={class:"card"},W={class:"my-2"},S=Object(r["j"])("div",{class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},[Object(r["j"])("h5",{class:"m-0"},"Detail Jam Kerja")],-1),x=Object(r["j"])("span",{class:"p-column-title"},"ID",-1),D={class:"field"},T=Object(r["j"])("label",{for:"name"},"Jam Kerja",-1),I={key:0,class:"p-invalid"};function C(e,t,i,a,o,s){const n=Object(r["H"])("Button"),l=Object(r["H"])("Toolbar"),c=Object(r["H"])("Column"),d=Object(r["H"])("DataTable"),u=Object(r["H"])("Dropdown"),m=Object(r["H"])("Dialog");return Object(r["z"])(),Object(r["i"])("div",_,[Object(r["j"])("div",y,[Object(r["m"])(l,{class:"mb-4"},{start:Object(r["S"])(()=>[Object(r["j"])("div",W,[Object(r["m"])(n,{label:"New",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:s.openNew},null,8,["onClick"])])]),_:1}),Object(r["m"])(d,{value:o.workunitWorktimes,ref:"dt",dataKey:"id",responsiveLayout:"scroll"},{header:Object(r["S"])(()=>[S]),default:Object(r["S"])(()=>[Object(r["m"])(c,{field:"id",header:"ID",sortable:!0},{body:Object(r["S"])(e=>[x,Object(r["l"])(" "+Object(r["L"])(e.data.id),1)]),_:1}),Object(r["m"])(c,{field:"name",header:"Nama"}),Object(r["m"])(c,{header:"Aksi"},{body:Object(r["S"])(e=>[e.data.id?(Object(r["z"])(),Object(r["g"])(n,{key:0,icon:"pi pi-trash",class:"p-button-rounded p-button-warning mt-2",onClick:t=>s.confirmDelete(e.data)},null,8,["onClick"])):Object(r["h"])("",!0)]),_:1})]),_:1},8,["value"]),Object(r["m"])(m,{visible:o.workunitWorktimeDialog,"onUpdate:visible":t[1]||(t[1]=e=>o.workunitWorktimeDialog=e),style:{width:"450px"},header:"Form Detail Jam Kerja",modal:!0,class:"p-fluid"},{footer:Object(r["S"])(()=>[Object(r["m"])(n,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:s.hideDialog},null,8,["onClick"]),Object(r["m"])(n,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:s.saveWorktime},null,8,["onClick"])]),default:Object(r["S"])(()=>[Object(r["j"])("div",D,[T,Object(r["m"])(u,{modelValue:o.workunitWorktime.worktime_id,"onUpdate:modelValue":t[0]||(t[0]=e=>o.workunitWorktime.worktime_id=e),options:o.worktimes,optionLabel:"name",optionValue:"id",placeholder:"Pilih Jam Kerja",class:Object(r["t"])({"p-invalid":o.submitted&&!o.workunitWorktime.worktime_id})},null,8,["modelValue","options","class"]),o.submitted&&!o.workunitWorktime.worktime_id?(Object(r["z"])(),Object(r["i"])("small",I,"Jam kerja diperlukan.")):Object(r["h"])("",!0)])]),_:1},8,["visible"])])])}i("14d9");var L=i("7467"),z={props:{workunit:{},workunitService:null},data(){return{loading:!1,worktimes:null,workunitWorktimes:null,workunitWorktime:{},filters:{},lazyParams:{},columns:[{field:"id",header:"ID"},{field:"name",header:"Nama"}],workunitWorktimeDialog:!1,submitted:!1}},worktimeService:null,created(){this.worktimeService=new L["a"],this.workunitWorktimes=this.workunit.worktimes},mounted(){this.initData()},methods:{initData(){this.worktimeService.getAllWorktimes().then(e=>{this.worktimes=e})},openNew(){this.workunitWorktime={},this.submitted=!1,this.workunitWorktimeDialog=!0},editPlace(e){this.workunitWorktime={...e},this.workunitWorktimeDialog=!0},confirmDelete(e){this.workunitWorktime=e,this.$swal({title:"Apakah anda yakin akan menghapus data ini ?",showCancelButton:!0,confirmButtonText:"Hapus"}).then(e=>{e.isConfirmed&&this.workunitService.deleteWorktime(this.workunit,this.workunitWorktime).then(e=>{"redirectTo"in e&&(localStorage.removeItem("presence_app_token"),localStorage.removeItem("presence_app_role"),this.$router.push(e.redirectTo)),e.success?(this.workunitWorktimes=this.workunitWorktimes.filter(e=>e.id!==this.workunitWorktime.id),this.$swal({icon:"success",title:"Success",text:e.message}),this.workunitWorktimeDialog=!1,this.workunitWorktime={}):this.$swal({icon:"error",title:"Oops...",text:e.message})})})},hideDialog(){this.workunitWorktimeDialog=!1,this.submitted=!1},saveWorktime(){this.submitted=!0,this.workunitService.assignWorktime(this.workunit,this.workunitWorktime).then(e=>{if("redirectTo"in e&&(localStorage.removeItem("presence_app_token"),localStorage.removeItem("presence_app_role"),this.$router.push(e.redirectTo)),e.success){this.$swal({icon:"success",title:"Success",text:e.message});var t=this.worktimes.find(e=>e.id===this.workunitWorktime.worktime_id);this.workunitWorktimes=[{id:t.id,name:t.name}],this.workunitWorktimeDialog=!1,this.workunitWorktime={}}else this.$swal({icon:"error",title:"Oops...",text:e.message})})},findIndexById(e){let t=-1;for(let i=0;i<this.workunitWorktimes.length;i++)if(this.workunitWorktimes[i].id===e){t=i;break}return t}}},B=i("6b0d"),F=i.n(B);const J=F()(z,[["render",C]]);var N=J,H={components:{DetailWorktime:N},data(){return{workunitId:null,workunit:{},submitted:!1}},workunitService:null,created(){this.workunitId=this.$route.params.id,this.workunitService=new v["a"]},mounted(){this.initData()},methods:{initData(){this.workunitService.getWorkunit(this.workunitId).then(e=>{this.workunit=e})}}};const P=F()(H,[["render",O]]);t["default"]=P},7467:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));class r{getWorktimes(e){var t="page="+(e.page+1)+"&per_page="+e.rows,i=1==e.sortOrder?"asc":"desc";return t+="&order_by="+i,null!=e.sortField&&(t+="&sort_by="+e.sortField),e.filters.global.value&&(t+="&keyword="+e.filters.global.value),fetch("https://sisapa.tanjungbalaikota.go.id/api/worktimes?"+t,{headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token")}}).then(e=>401==e.status?{data:{redirectTo:"login"}}:e.json()).then(e=>e.data)}getAllWorktimes(){return fetch("https://sisapa.tanjungbalaikota.go.id/api/worktimes?response=array",{headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token")}}).then(e=>401==e.status?{data:{redirectTo:"login"}}:e.json()).then(e=>e.data)}createWorktime(e){return fetch("https://sisapa.tanjungbalaikota.go.id/api/worktimes",{method:"POST",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(e)}).then(e=>401==e.status?{redirectTo:"Login"}:e.json())}updateWorktime(e){return fetch("https://sisapa.tanjungbalaikota.go.id/api/worktimes/"+e.id,{method:"PUT",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(e)}).then(e=>401==e.status?{redirectTo:"Login"}:e.json())}deleteWorktime(e){return fetch("https://sisapa.tanjungbalaikota.go.id/api/worktimes/"+e.id,{method:"DELETE",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(e)}).then(e=>401==e.status?{redirectTo:"Login"}:e.json())}}},fca4:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));class r{getWorkunits(e){var t="";if(e){t="?page="+(e.page+1)+"&per_page="+e.rows;var i=1==e.sortOrder?"asc":"desc";t+="&order_by="+i,null!=e.sortField&&(t+="&sort_by="+e.sortField),e.filters.global.value&&(t+="&keyword="+e.filters.global.value)}else t="?all=1&order_by=asc";return fetch("https://sisapa.tanjungbalaikota.go.id/api/workunits"+t,{headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token")}}).then(e=>401==e.status?{data:{redirectTo:"Login"}}:e.json()).then(e=>e.data)}getWorkunit(e){return fetch("https://sisapa.tanjungbalaikota.go.id/api/workunits/"+e,{headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token")}}).then(e=>401==e.status?{data:{redirectTo:"login"}}:e.json()).then(e=>e.data)}getPresences(e,t=!1,i=!1){var r="";if(e){r="page="+(e.page+1)+"&per_page="+e.rows;var a=1==e.sortOrder?"asc":"desc";r+="&order_by="+a,null!=e.sortField&&(r+="&sort_by="+e.sortField),e.filters.global.value&&(r+="&keyword="+e.filters.global.value),null!=e.date_start&&null!=e.date_end&&(r+="&date_start="+e.date_start+"&date_end="+e.date_end)}i&&(r+="&type="+i);var o=t?"https://sisapa.tanjungbalaikota.go.id/api/workunits/"+t+"/presences?"+r:"https://sisapa.tanjungbalaikota.go.id/api/workunits/presences?"+r;return fetch(o,{headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token")}}).then(e=>401==e.status?{data:{redirectTo:"login"}}:e.json()).then(e=>e.data)}updateWorkunit(e){return fetch("https://sisapa.tanjungbalaikota.go.id/api/workunits/"+e.id+"/place",{method:"PATCH",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({lat:e.lat,lng:e.lng,radius:e.radius})}).then(e=>401==e.status?{redirectTo:"Login"}:e.json())}assignWorktime(e,t){return fetch("https://sisapa.tanjungbalaikota.go.id/api/workunits/"+e.id+"/worktime",{method:"PATCH",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({worktime_id:t.worktime_id})}).then(e=>401==e.status?{redirectTo:"Login"}:e.json())}deleteWorktime(e,t){return fetch("https://sisapa.tanjungbalaikota.go.id/api/workunits/"+e.id+"/worktime",{method:"DELETE",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({worktime_id:t.id})}).then(e=>401==e.status?{redirectTo:"Login"}:e.json())}}}}]);
//# sourceMappingURL=chunk-27d913c0.74169945.js.map