"use strict";(self["webpackChunksakai_vue"]=self["webpackChunksakai_vue"]||[]).push([[747],{6234:function(e,t,a){a.d(t,{Z:function(){return r}});class r{getEmployees(e,t=!1){var a="";if(e){a="page="+(e.page+1)+"&per_page="+e.rows;var r=1==e.sortOrder?"asc":"desc";a+="&order_by="+r,null!=e.sortField&&(a+="&sort_by="+e.sortField),e.filters.global.value&&(a+="&keyword="+e.filters.global.value)}var s=JSON.parse(localStorage.getItem("presence_user_data"));return s.workunit_id&&(a+="&workunit_id="+s.workunit_id),t&&(a+="&workunit_id="+t),fetch("https://sisapa.tanjungbalaikota.go.id/api/employees?"+a,{headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token")}}).then((e=>401==e.status?{data:{redirectTo:"login"}}:e.json())).then((e=>e.data))}getEmployeesReport(e,t){var a="";if(e){a="page="+(e.page+1)+"&per_page="+e.rows;var r=1==e.sortOrder?"asc":"desc";a+="&order_by="+r,null!=e.sortField&&(a+="&sort_by="+e.sortField),e.filters.global.value&&(a+="&keyword="+e.filters.global.value),null!=e.date_start&&null!=e.date_end&&(a+="&date_start="+e.date_start+"&date_end="+e.date_end)}return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/reports/"+t+"?"+a,{headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token")}}).then((e=>401==e.status?{data:{redirectTo:"login"}}:e.json())).then((e=>e.data))}getEmployeesReportDetail(e,t){var a="";if(e){a="page="+(e.page+1)+"&per_page="+e.rows;var r=1==e.sortOrder?"asc":"desc";a+="&order_by="+r,null!=e.sortField&&(a+="&sort_by="+e.sortField),e.filters.global.value&&(a+="&keyword="+e.filters.global.value),null!=e.date_start&&null!=e.date_end&&(a+="&date_start="+e.date_start+"&date_end="+e.date_end)}return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/report-details/"+t+"?"+a,{headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token")}}).then((e=>401==e.status?{data:{redirectTo:"login"}}:e.json())).then((e=>e.data))}getEmployeesReportPdfLink(e,t){var a="";if(e){var r=1==e.sortOrder?"asc":"desc";a+="&order_by="+r,null!=e.sortField&&(a+="&sort_by="+e.sortField),e.filters.global.value&&(a+="&keyword="+e.filters.global.value),null!=e.date_start&&null!=e.date_end&&(a+="&date_start="+e.date_start+"&date_end="+e.date_end)}return"https://sisapa.tanjungbalaikota.go.id/api/employees/report-pdf/"+t+"?"+a}getEmployeesReportDetailPdfLink(e,t){var a="";if(e){var r=1==e.sortOrder?"asc":"desc";a+="&order_by="+r,null!=e.sortField&&(a+="&sort_by="+e.sortField),e.filters.global.value&&(a+="&keyword="+e.filters.global.value),null!=e.date_start&&null!=e.date_end&&(a+="&date_start="+e.date_start+"&date_end="+e.date_end)}return"https://sisapa.tanjungbalaikota.go.id/api/employees/report-detail-pdf/"+t+"?"+a}getEmployee(e){return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/"+e,{headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token")}}).then((e=>401==e.status?{data:{redirectTo:"login"}}:e.json())).then((e=>e.data))}getPresence(e,t){return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/"+e+"/presences/"+t,{headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token")}}).then((e=>401==e.status?{data:{redirectTo:"login"}}:e.json())).then((e=>e.data))}updateEmployee(e){return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/"+e.id+"/place",{method:"PATCH",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({lat:e.lat,lng:e.lng,radius:e.radius})}).then((e=>401==e.status?{redirectTo:"Login"}:e.json()))}updateRole(e,t){var a={...e};return a.role=t,fetch("https://sisapa.tanjungbalaikota.go.id/api/users/"+e.id,{method:"PUT",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(a)}).then((e=>401==e.status?{redirectTo:"Login"}:e.json()))}addPlace(e,t){return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/"+e.id+"/place",{method:"POST",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)}).then((e=>401==e.status?{redirectTo:"Login"}:e.json()))}deletePlace(e,t){return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/"+e.id+"/place",{method:"DELETE",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({place_id:t.id})}).then((e=>401==e.status?{redirectTo:"Login"}:e.json()))}patchPlace(e){return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/"+e.id+"/place",{method:"PATCH",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"}}).then((e=>401==e.status?{redirectTo:"Login"}:e.json()))}patchAndroid(e){return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/"+e.id+"/android-user",{method:"PATCH",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"}}).then((e=>401==e.status?{redirectTo:"Login"}:e.json()))}resetDevice(e){return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/"+e.id+"/reset-device",{method:"POST",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"}}).then((e=>401==e.status?{redirectTo:"Login"}:e.json()))}resetPassword(e){return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/"+e.id+"/reset-password",{method:"POST",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"}}).then((e=>401==e.status?{redirectTo:"Login"}:e.json()))}addWorktime(e,t){return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/"+e.id+"/worktime",{method:"POST",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)}).then((e=>401==e.status?{redirectTo:"Login"}:e.json()))}deleteWorktime(e,t){return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/"+e.id+"/worktime",{method:"DELETE",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({worktime_id:t.id,date_start:t.pivot.date_start,date_end:t.pivot.date_end})}).then((e=>401==e.status?{redirectTo:"Login"}:e.json()))}actionPresence(e,t){return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/"+t.employee_id+"/presences/"+t.id,{method:"PATCH",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({status:e})}).then((e=>401==e.status?{redirectTo:"Login"}:e.json()))}insertPresence(e,t){return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/"+e+"/presences",{method:"POST",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token")},body:t}).then((e=>401==e.status?{redirectTo:"Login"}:e.json()))}}},9747:function(e,t,a){a.r(t),a.d(t,{default:function(){return te}});var r=a(6252),s=a(6612);const o={class:"grid"},i={class:"col-12"},n={class:"card"},l={class:"flex justify-content-between mb-3 align-items-center"},d={class:"font-medium text-3xl text-900"},p={key:0,class:"list-none p-0 m-0"},c={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},u=(0,r._)("div",{class:"text-500 w-6 md:w-2 font-medium"},"Pegawai",-1),g={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},m={key:0,class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},h=(0,r._)("div",{class:"text-500 w-6 md:w-2 font-medium"},"Jadwal",-1),f={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},_={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},w=(0,r._)("div",{class:"text-500 w-6 md:w-2 font-medium"},"OPD",-1),y={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},k={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},x=(0,r._)("div",{class:"text-500 w-6 md:w-2 font-medium"},"Tipe",-1),b={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},v={key:1,class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},j=(0,r._)("div",{class:"text-500 w-6 md:w-2 font-medium"},"Di lokasi",-1),T={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},S={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},z=(0,r._)("div",{class:"text-500 w-6 md:w-2 font-medium"},"Status",-1),I={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},P={key:2,class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},C=(0,r._)("div",{class:"text-500 w-6 md:w-2 font-medium"},"Waktu Mulai",-1),D={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},F={key:3,class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},B=(0,r._)("div",{class:"text-500 w-6 md:w-2 font-medium"},"Waktu Selesai",-1),O={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},L={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},E=(0,r._)("div",{class:"text-500 w-6 md:w-2 font-medium"},"Tanggal",-1),q={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},U={key:4,class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},J=(0,r._)("div",{class:"text-500 w-6 md:w-2 font-medium"},"Selfi",-1),N={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},A=["src"],R={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},$=(0,r._)("div",{class:"text-500 w-6 md:w-2 font-medium"},"Lampiran",-1),H={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},W=["href"],Z={key:5,class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},Y=(0,r._)("div",{class:"text-500 w-6 md:w-2 font-medium"},"Lokasi",-1),M={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},G=["src"];function K(e,t,a,K,Q,V){const X=(0,r.up)("Button");return(0,r.wg)(),(0,r.iD)("div",o,[(0,r._)("div",i,[(0,r._)("div",n,[(0,r._)("div",l,[(0,r._)("div",d,"Detail "+(0,s.zw)(Q.presence.presence_id?"Absensi":Q.presence.type.includes("tugas")?Q.presence.type:"Cuti"),1),(0,r._)("div",null,["diajukan"==Q.presence.status?((0,r.wg)(),(0,r.j4)(X,{key:0,icon:"pi pi-check",class:"p-button-rounded p-button-success mr-2",onClick:t[0]||(t[0]=e=>V.action("setujui",Q.presence))})):(0,r.kq)("",!0),"diajukan"==Q.presence.status?((0,r.wg)(),(0,r.j4)(X,{key:1,icon:"pi pi-times",class:"p-button-rounded p-button-danger mr-2",onClick:t[1]||(t[1]=e=>V.action("tolak",Q.presence))})):(0,r.kq)("",!0)])]),Q.presence.employee?((0,r.wg)(),(0,r.iD)("ul",p,[(0,r._)("li",c,[u,(0,r._)("div",g,(0,s.zw)(Q.presence.employee.nip+" - "+Q.presence.employee.name),1)]),Q.presence.presence_id?((0,r.wg)(),(0,r.iD)("li",m,[h,(0,r._)("div",f,(0,s.zw)(Q.presence.worktime_item?.name),1)])):(0,r.kq)("",!0),(0,r._)("li",_,[w,(0,r._)("div",y,(0,s.zw)(Q.presence.workunit.name),1)]),(0,r._)("li",k,[x,(0,r._)("div",b,(0,s.zw)(Q.presence.type),1)]),Q.presence.presence_id?((0,r.wg)(),(0,r.iD)("li",v,[j,(0,r._)("div",T,(0,s.zw)(1==Q.presence.in_location?"Ya":"Tidak"),1)])):(0,r.kq)("",!0),(0,r._)("li",S,[z,(0,r._)("div",I,(0,s.zw)(Q.presence.status),1)]),null==Q.presence.presence_id||"tugas luar"==Q.presence.type?((0,r.wg)(),(0,r.iD)("li",P,[C,(0,r._)("div",D,(0,s.zw)(Q.presence.started_at),1)])):(0,r.kq)("",!0),null==Q.presence.presence_id||"tugas luar"==Q.presence.type?((0,r.wg)(),(0,r.iD)("li",F,[B,(0,r._)("div",O,(0,s.zw)(Q.presence.finished_at),1)])):(0,r.kq)("",!0),(0,r._)("li",L,[E,(0,r._)("div",q,(0,s.zw)(Q.presence.created_at),1)]),Q.presence.presence_id?((0,r.wg)(),(0,r.iD)("li",U,[J,(0,r._)("div",N,[Q.presence.pic_url?((0,r.wg)(),(0,r.iD)("img",{key:0,src:Q.storage_url+Q.presence.pic_url,style:{width:"250px"}},null,8,A)):(0,r.kq)("",!0)])])):(0,r.kq)("",!0),(0,r._)("li",R,[$,(0,r._)("div",H,[Q.presence.attachment_url?((0,r.wg)(),(0,r.iD)("a",{key:0,href:Q.storage_url+Q.presence.attachment_url,target:"_blank"},"Download",8,W)):(0,r.kq)("",!0)])]),Q.presence.presence_id?((0,r.wg)(),(0,r.iD)("li",Z,[Y,(0,r._)("div",M,[(0,r._)("iframe",{width:"500",height:"300",src:"//maps.google.com/maps?q="+Q.presence.lat+","+Q.presence.lng+"&z=15&output=embed",allowfullscreen:"",style:{border:"0"},referrerpolicy:"no-referrer-when-downgrade"},null,8,G)])])):(0,r.kq)("",!0)])):(0,r.kq)("",!0)])])])}var Q=a(6234),V={data(){return{employeeId:null,presenceId:null,presence:{},submitted:!1,storage_url:"https://sisapa.tanjungbalaikota.go.id/storage/"}},employeeService:null,created(){this.presenceId=this.$route.params.id,this.employeeId=this.$route.params.employee_id,this.employeeService=new Q.Z,this.initData()},methods:{initData(){this.employeeService.getPresence(this.employeeId,this.presenceId).then((e=>{this.presence=e,console.log(e)}))},action(e,t){this.$swal({title:"Apakah anda yakin akan "+e+" data ini ?",showCancelButton:!0,confirmButtonText:"Ya"}).then((a=>{a.isConfirmed&&this.employeeService.actionPresence("di"+e,t).then((e=>{e.success?(this.$swal({icon:"success",title:"Success",text:e.message}),this.initData()):this.$swal({icon:"error",title:"Oops...",text:e.message})}))}))}}},X=a(3744);const ee=(0,X.Z)(V,[["render",K]]);var te=ee}}]);
//# sourceMappingURL=747.0f152039.js.map