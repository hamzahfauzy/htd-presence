"use strict";(self["webpackChunksakai_vue"]=self["webpackChunksakai_vue"]||[]).push([[744],{5325:function(e,t,i){i.d(t,{Z:function(){return r}});class r{getWorktimes(e){var t="page="+(e.page+1)+"&per_page="+e.rows,i=1==e.sortOrder?"asc":"desc";return t+="&order_by="+i,null!=e.sortField&&(t+="&sort_by="+e.sortField),e.filters.global.value&&(t+="&keyword="+e.filters.global.value),fetch("https://presensi.webisnis.id/api/worktimes?"+t,{headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token")}}).then((e=>401==e.status?{data:{redirectTo:"login"}}:e.json())).then((e=>e.data))}getAllWorktimes(){return fetch("https://presensi.webisnis.id/api/worktimes?response=array",{headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token")}}).then((e=>401==e.status?{data:{redirectTo:"login"}}:e.json())).then((e=>e.data))}createWorktime(e){return fetch("https://presensi.webisnis.id/api/worktimes",{method:"POST",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(e)}).then((e=>401==e.status?{redirectTo:"Login"}:e.json()))}updateWorktime(e){return fetch("https://presensi.webisnis.id/api/worktimes/"+e.id,{method:"PUT",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(e)}).then((e=>401==e.status?{redirectTo:"Login"}:e.json()))}deleteWorktime(e){return fetch("https://presensi.webisnis.id/api/worktimes/"+e.id,{method:"DELETE",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(e)}).then((e=>401==e.status?{redirectTo:"Login"}:e.json()))}}},265:function(e,t,i){i.d(t,{Z:function(){return r}});class r{getWorkunits(e){var t="";if(e){t="?page="+(e.page+1)+"&per_page="+e.rows;var i=1==e.sortOrder?"asc":"desc";t+="&order_by="+i,null!=e.sortField&&(t+="&sort_by="+e.sortField),e.filters.global.value&&(t+="&keyword="+e.filters.global.value)}else t="?all=1&order_by=asc";return fetch("https://presensi.webisnis.id/api/workunits"+t,{headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token")}}).then((e=>401==e.status?{data:{redirectTo:"Login"}}:e.json())).then((e=>e.data))}getWorkunit(e){return fetch("https://presensi.webisnis.id/api/workunits/"+e,{headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token")}}).then((e=>401==e.status?{data:{redirectTo:"login"}}:e.json())).then((e=>e.data))}getPresences(e,t=!1,i=!1){var r="";if(e){r="page="+(e.page+1)+"&per_page="+e.rows;var o=1==e.sortOrder?"asc":"desc";r+="&order_by="+o,null!=e.sortField&&(r+="&sort_by="+e.sortField),e.filters.global.value&&(r+="&keyword="+e.filters.global.value),null!=e.date_start&&null!=e.date_end&&(r+="&date_start="+e.date_start+"&date_end="+e.date_end)}i&&(r+="&type="+i);var s=t?"https://presensi.webisnis.id/api/workunits/"+t+"/presences?"+r:"https://presensi.webisnis.id/api/workunits/presences?"+r;return fetch(s,{headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token")}}).then((e=>401==e.status?{data:{redirectTo:"login"}}:e.json())).then((e=>e.data))}addWorkunit(e){return fetch("https://presensi.webisnis.id/api/workunits",{method:"POST",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({name:e.name,lat:e.lat,lng:e.lng,radius:e.radius})}).then((e=>401==e.status?{redirectTo:"Login"}:e.json()))}updateWorkunit(e){return fetch("https://presensi.webisnis.id/api/workunits/"+e.id,{method:"POST",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({_method:"PUT",name:e.name,lat:e.lat,lng:e.lng,radius:e.radius})}).then((e=>401==e.status?{redirectTo:"Login"}:e.json()))}assignWorktime(e,t){return fetch("https://presensi.webisnis.id/api/workunits/"+e.id+"/worktime",{method:"PATCH",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({worktime_id:t.worktime_id})}).then((e=>401==e.status?{redirectTo:"Login"}:e.json()))}deleteWorktime(e,t){return fetch("https://presensi.webisnis.id/api/workunits/"+e.id+"/worktime",{method:"DELETE",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({worktime_id:t.id})}).then((e=>401==e.status?{redirectTo:"Login"}:e.json()))}deleteWorkunit(e){return fetch("https://presensi.webisnis.id/api/workunits/"+e.id,{method:"DELETE",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"}}).then((e=>401==e.status?{redirectTo:"Login"}:e.json()))}}},1744:function(e,t,i){i.r(t),i.d(t,{default:function(){return E}});var r=i(6252),o=i(3577);const s={class:"grid"},a={class:"col-12"},n={class:"card"},l=(0,r._)("div",{class:"font-medium text-3xl text-900 mb-3"},"Detail Unit Kerja",-1),d={class:"list-none p-0 m-0"},u={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},c=(0,r._)("div",{class:"text-500 w-6 md:w-2 font-medium"},"Nama",-1),p={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},m={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},k=(0,r._)("div",{class:"text-500 w-6 md:w-2 font-medium"},"Latitude",-1),h={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},w={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},g=(0,r._)("div",{class:"text-500 w-6 md:w-2 font-medium"},"Longitude",-1),f={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},_={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},b=(0,r._)("div",{class:"text-500 w-6 md:w-2 font-medium"},"Radius",-1),v={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"};function W(e,t,i,W,y,x){const S=(0,r.up)("DetailWorktime");return(0,r.wg)(),(0,r.iD)("div",s,[(0,r._)("div",a,[(0,r._)("div",n,[l,(0,r._)("ul",d,[(0,r._)("li",u,[c,(0,r._)("div",p,(0,o.zw)(y.workunit.name),1)]),(0,r._)("li",m,[k,(0,r._)("div",h,(0,o.zw)(y.workunit.lat),1)]),(0,r._)("li",w,[g,(0,r._)("div",f,(0,o.zw)(y.workunit.lng),1)]),(0,r._)("li",_,[b,(0,r._)("div",v,(0,o.zw)(y.workunit.radius),1)])])])]),0!=Object.keys(y.workunit).length?((0,r.wg)(),(0,r.j4)(S,{key:0,workunit:y.workunit,workunitService:e.workunitService},null,8,["workunit","workunitService"])):(0,r.kq)("",!0)])}var y=i(265);const x={class:"col-12"},S={class:"card"},T={class:"my-2"},D=(0,r._)("div",{class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},[(0,r._)("h5",{class:"m-0"},"Detail Jam Kerja")],-1),j=(0,r._)("span",{class:"p-column-title"},"ID",-1),I={class:"field"},C=(0,r._)("label",{for:"name"},"Jam Kerja",-1),z={key:0,class:"p-invalid"};function B(e,t,i,s,a,n){const l=(0,r.up)("Button"),d=(0,r.up)("Toolbar"),u=(0,r.up)("Column"),c=(0,r.up)("DataTable"),p=(0,r.up)("Dropdown"),m=(0,r.up)("Dialog");return(0,r.wg)(),(0,r.iD)("div",x,[(0,r._)("div",S,[(0,r.Wm)(d,{class:"mb-4"},{start:(0,r.w5)((()=>[(0,r._)("div",T,[(0,r.Wm)(l,{label:"New",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:n.openNew},null,8,["onClick"])])])),_:1}),(0,r.Wm)(c,{value:a.workunitWorktimes,ref:"dt",dataKey:"id",responsiveLayout:"scroll"},{header:(0,r.w5)((()=>[D])),default:(0,r.w5)((()=>[(0,r.Wm)(u,{field:"id",header:"ID",sortable:!0},{body:(0,r.w5)((e=>[j,(0,r.Uk)(" "+(0,o.zw)(e.data.id),1)])),_:1}),(0,r.Wm)(u,{field:"name",header:"Nama"}),(0,r.Wm)(u,{header:"Aksi"},{body:(0,r.w5)((e=>[e.data.id?((0,r.wg)(),(0,r.j4)(l,{key:0,icon:"pi pi-trash",class:"p-button-rounded p-button-warning mt-2",onClick:t=>n.confirmDelete(e.data)},null,8,["onClick"])):(0,r.kq)("",!0)])),_:1})])),_:1},8,["value"]),(0,r.Wm)(m,{visible:a.workunitWorktimeDialog,"onUpdate:visible":t[1]||(t[1]=e=>a.workunitWorktimeDialog=e),style:{width:"450px"},header:"Form Detail Jam Kerja",modal:!0,class:"p-fluid"},{footer:(0,r.w5)((()=>[(0,r.Wm)(l,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:n.hideDialog},null,8,["onClick"]),(0,r.Wm)(l,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:n.saveWorktime},null,8,["onClick"])])),default:(0,r.w5)((()=>[(0,r._)("div",I,[C,(0,r.Wm)(p,{modelValue:a.workunitWorktime.worktime_id,"onUpdate:modelValue":t[0]||(t[0]=e=>a.workunitWorktime.worktime_id=e),options:a.worktimes,optionLabel:"name",optionValue:"id",placeholder:"Pilih Jam Kerja",class:(0,o.C_)({"p-invalid":a.submitted&&!a.workunitWorktime.worktime_id})},null,8,["modelValue","options","class"]),a.submitted&&!a.workunitWorktime.worktime_id?((0,r.wg)(),(0,r.iD)("small",z,"Jam kerja diperlukan.")):(0,r.kq)("",!0)])])),_:1},8,["visible"])])])}i(560);var L=i(5325),O={props:{workunit:{},workunitService:null},data(){return{loading:!1,worktimes:null,workunitWorktimes:null,workunitWorktime:{},filters:{},lazyParams:{},columns:[{field:"id",header:"ID"},{field:"name",header:"Nama"}],workunitWorktimeDialog:!1,submitted:!1}},worktimeService:null,created(){this.worktimeService=new L.Z,this.workunitWorktimes=this.workunit.worktimes},mounted(){this.initData()},methods:{initData(){this.worktimeService.getAllWorktimes().then((e=>{this.worktimes=e}))},openNew(){this.workunitWorktime={},this.submitted=!1,this.workunitWorktimeDialog=!0},editPlace(e){this.workunitWorktime={...e},this.workunitWorktimeDialog=!0},confirmDelete(e){this.workunitWorktime=e,this.$swal({title:"Apakah anda yakin akan menghapus data ini ?",showCancelButton:!0,confirmButtonText:"Hapus"}).then((e=>{e.isConfirmed&&this.workunitService.deleteWorktime(this.workunit,this.workunitWorktime).then((e=>{"redirectTo"in e&&(localStorage.removeItem("presence_app_token"),localStorage.removeItem("presence_app_role"),this.$router.push(e.redirectTo)),e.success?(this.workunitWorktimes=this.workunitWorktimes.filter((e=>e.id!==this.workunitWorktime.id)),this.$swal({icon:"success",title:"Success",text:e.message}),this.workunitWorktimeDialog=!1,this.workunitWorktime={}):this.$swal({icon:"error",title:"Oops...",text:e.message})}))}))},hideDialog(){this.workunitWorktimeDialog=!1,this.submitted=!1},saveWorktime(){this.submitted=!0,this.workunitService.assignWorktime(this.workunit,this.workunitWorktime).then((e=>{if("redirectTo"in e&&(localStorage.removeItem("presence_app_token"),localStorage.removeItem("presence_app_role"),this.$router.push(e.redirectTo)),e.success){this.$swal({icon:"success",title:"Success",text:e.message});var t=this.worktimes.find((e=>e.id===this.workunitWorktime.worktime_id));this.workunitWorktimes=[{id:t.id,name:t.name}],this.workunitWorktimeDialog=!1,this.workunitWorktime={}}else this.$swal({icon:"error",title:"Oops...",text:e.message})}))},findIndexById(e){let t=-1;for(let i=0;i<this.workunitWorktimes.length;i++)if(this.workunitWorktimes[i].id===e){t=i;break}return t}}},F=i(3744);const U=(0,F.Z)(O,[["render",B]]);var N=U,J={components:{DetailWorktime:N},data(){return{workunitId:null,workunit:{},submitted:!1}},workunitService:null,created(){this.workunitId=this.$route.params.id,this.workunitService=new y.Z},mounted(){this.initData()},methods:{initData(){this.workunitService.getWorkunit(this.workunitId).then((e=>{this.workunit=e}))}}};const P=(0,F.Z)(J,[["render",W]]);var E=P}}]);
//# sourceMappingURL=744.a729afaf.js.map