{"version":3,"file":"js/944.53e1f6ef.js","mappings":"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","sources":["webpack://sakai-vue/./src/service/WorkunitService.js","webpack://sakai-vue/./src/pages/workunits/Index.vue","webpack://sakai-vue/./src/pages/workunits/Index.vue?dd06"],"sourcesContent":["export default class WorkunitService {\r\n\r\n\tgetWorkunits(lazyParams) {\r\n        // const queryParams = params ? Object.keys(params).map(k => encodeURIComponent(k) + '=' + encodeURIComponent(params[k])).join('&') : '';\r\n        \r\n        var params = ''\r\n        if(lazyParams){\r\n            params = '?page='+(lazyParams.page+1)+'&per_page='+lazyParams.rows\r\n            var order_by = lazyParams.sortOrder == 1 ? 'asc' : 'desc';\r\n            params +='&order_by='+order_by\r\n            if(lazyParams.sortField != null)\r\n            {\r\n                params += '&sort_by='+lazyParams.sortField\r\n            }\r\n\r\n            if(lazyParams.filters.global.value)\r\n            {\r\n                params += '&keyword='+lazyParams.filters.global.value\r\n            }\r\n        }else{\r\n            params = \"?all=1&order_by=asc\"\r\n        }\r\n\r\n\t\treturn fetch(process.env.VUE_APP_API_URL+'workunits' + params,{\r\n            headers:{\r\n                'authorization' : 'Bearer '+localStorage.getItem('presence_app_token')\r\n            }\r\n        })\r\n        .then(res => {\r\n            if(res.status == 401)\r\n            {\r\n                return {data:{redirectTo:\"Login\"}};\r\n            }\r\n            return res.json()\r\n        })\r\n        .then(d => d.data);\r\n    }\r\n\r\n    getWorkunit(id) {\r\n\t\treturn fetch(process.env.VUE_APP_API_URL+'workunits/' + id,{\r\n            headers:{\r\n                'authorization' : 'Bearer '+localStorage.getItem('presence_app_token')\r\n            }\r\n        })\r\n        .then(res => {\r\n            if(res.status == 401)\r\n            {\r\n                return {data:{redirectTo:\"login\"}};\r\n            }\r\n            return res.json()\r\n        })\r\n        .then(d => d.data);\r\n    }\r\n\r\n    getPresences(lazyParams, id = false, type = false) {\r\n\r\n        var params = ''\r\n        if(lazyParams){\r\n            params = 'page='+(lazyParams.page+1)+'&per_page='+lazyParams.rows\r\n            var order_by = lazyParams.sortOrder == 1 ? 'asc' : 'desc';\r\n            params +='&order_by='+order_by\r\n            if(lazyParams.sortField != null)\r\n            {\r\n                params += '&sort_by='+lazyParams.sortField\r\n            }\r\n    \r\n            if(lazyParams.filters.global.value)\r\n            {\r\n                params += '&keyword='+lazyParams.filters.global.value\r\n            }\r\n\r\n            if(lazyParams.date_start != null && lazyParams.date_end != null)\r\n            {\r\n                params += '&date_start='+lazyParams.date_start+'&date_end='+lazyParams.date_end\r\n            }\r\n        }\r\n\r\n        if(type){\r\n            params += '&type='+type\r\n        }\r\n\r\n        var api_url = id ? process.env.VUE_APP_API_URL+'workunits/' + id + '/presences?'+params : process.env.VUE_APP_API_URL+'workunits/presences?'+params\r\n\r\n\t\treturn fetch(api_url,{\r\n            headers:{\r\n                'authorization' : 'Bearer '+localStorage.getItem('presence_app_token')\r\n            }\r\n        })\r\n        .then(res => {\r\n            if(res.status == 401)\r\n            {\r\n                return {data:{redirectTo:\"login\"}};\r\n            }\r\n            return res.json()\r\n        })\r\n        .then(d => d.data);\r\n    }\r\n\r\n    updateWorkunit(workunit){\r\n        return fetch(process.env.VUE_APP_API_URL+'workunits/'+workunit.id+'/place',{\r\n            method:'PATCH',\r\n            headers:{\r\n                'authorization' : 'Bearer '+localStorage.getItem('presence_app_token'),\r\n                'Content-type': 'application/json; charset=UTF-8',\r\n            },\r\n            body:JSON.stringify({\r\n                lat:workunit.lat,\r\n                lng:workunit.lng,\r\n                radius:workunit.radius,\r\n            })\r\n        })\r\n        .then(res => {\r\n            if(res.status == 401)\r\n            {\r\n                return {redirectTo:\"Login\"};\r\n            }\r\n            return res.json()\r\n        })\r\n    }\r\n\r\n    assignWorktime(workunit, data){\r\n        return fetch(process.env.VUE_APP_API_URL+'workunits/'+workunit.id+'/worktime',{\r\n            method:'PATCH',\r\n            headers:{\r\n                'authorization' : 'Bearer '+localStorage.getItem('presence_app_token'),\r\n                'Content-type': 'application/json; charset=UTF-8',\r\n            },\r\n            body:JSON.stringify({\r\n                worktime_id:data.worktime_id\r\n            })\r\n        })\r\n        .then(res => {\r\n            if(res.status == 401)\r\n            {\r\n                return {redirectTo:\"Login\"};\r\n            }\r\n            return res.json()\r\n        })\r\n    }\r\n\r\n    deleteWorktime(workunit, data){\r\n        return fetch(process.env.VUE_APP_API_URL+'workunits/'+workunit.id+'/worktime',{\r\n            method:'DELETE',\r\n            headers:{\r\n                'authorization' : 'Bearer '+localStorage.getItem('presence_app_token'),\r\n                'Content-type': 'application/json; charset=UTF-8',\r\n            },\r\n            body:JSON.stringify({\r\n                worktime_id:data.id\r\n            })\r\n        })\r\n        .then(res => {\r\n            if(res.status == 401)\r\n            {\r\n                return {redirectTo:\"Login\"};\r\n            }\r\n            return res.json()\r\n        })\r\n    }\r\n\t\r\n}","<template>\r\n    <div class=\"grid\">\r\n        <div class=\"col-12\">\r\n            <div class=\"card\">\r\n                <DataTable :value=\"workunits\" :lazy=\"true\" :paginator=\"true\" :rows=\"10\" v-model:filters=\"filters\"\r\n                    ref=\"dt\" dataKey=\"id\" :totalRecords=\"totalRecords\" :loading=\"loading\" @page=\"onPage($event)\"\r\n                    @sort=\"onSort($event)\" @filter=\"onFilter($event)\" :globalFilterFields=\"['name']\"\r\n                    responsiveLayout=\"scroll\" v-model:selection=\"selectedCustomers\" :selectAll=\"selectAll\"\r\n                    @select-all-change=\"onSelectAllChange\" @row-select=\"onRowSelect\" @row-unselect=\"onRowUnselect\">\r\n                    <template #header>\r\n                        <div class=\"flex flex-column md:flex-row md:justify-content-between md:align-items-center\">\r\n                            <h5 class=\"m-0\">Manajemen OPD / Unit Kerja</h5>\r\n                            <span class=\"block mt-2 md:mt-0 p-input-icon-left\">\r\n                                <i class=\"pi pi-search\" />\r\n                                <InputText v-model=\"filters['global'].value\" placeholder=\"Search...\"\r\n                                    @keyup=\"onFilter\" />\r\n                            </span>\r\n                        </div>\r\n                    </template>\r\n                    <Column field=\"id\" header=\"ID\" :sortable=\"true\">\r\n                        <template #body=\"slotProps\">\r\n                            <span class=\"p-column-title\">ID</span>\r\n                            {{slotProps.data.id}}\r\n                        </template>\r\n                    </Column>\r\n                    <Column field=\"name\" header=\"Nama\" filterMatchMode=\"startsWith\" ref=\"name\" :sortable=\"true\"\r\n                        headerStyle=\"width:20%; min-width:10rem;\">\r\n                        <template #body=\"slotProps\">\r\n                            <span class=\"p-column-title\">Nama</span>\r\n                            <router-link :to='{\"name\":\"workunits.detail\",\"params\":{\"id\":slotProps.data.id}}'>\r\n                                {{slotProps.data.name}}</router-link>\r\n                        </template>\r\n                    </Column>\r\n                    <Column field=\"lat\" header=\"Latitute\" ref=\"lat\"></Column>\r\n                    <Column field=\"lng\" header=\"Longitude\" ref=\"lng\"></Column>\r\n                    <Column field=\"radius\" header=\"Radius\" ref=\"radius\"></Column>\r\n                    <Column header=\"Aksi\">\r\n                        <template #body=\"slotProps\">\r\n                            <Button icon=\"pi pi-pencil\" class=\"p-button-rounded p-button-success mr-2\"\r\n                                @click=\"editWorkunit(slotProps.data)\" />\r\n                        </template>\r\n                    </Column>\r\n                </DataTable>\r\n\r\n                <Dialog v-model:visible=\"workunitDialog\" :style=\"{width: '450px'}\" header=\"Detail OPD\" :modal=\"true\"\r\n                    class=\"p-fluid\">\r\n                    <div class=\"field\">\r\n                        <label for=\"name\">Nama</label>\r\n                        <InputText id=\"name\" v-model.trim=\"workunit.name\" required=\"true\" autofocus disabled />\r\n                    </div>\r\n                    <div class=\"field\">\r\n                        <label for=\"lat\">Latitute</label>\r\n                        <InputText id=\"lat\" v-model.trim=\"workunit.lat\" required=\"true\" autofocus\r\n                            :class=\"{'p-invalid': submitted && !workunit.lat}\" />\r\n                        <small class=\"p-invalid\" v-if=\"submitted && !workunit.lat\">Latitute diperlukan.</small>\r\n                    </div>\r\n                    <div class=\"field\">\r\n                        <label for=\"lng\">Longitude</label>\r\n                        <InputText id=\"lng\" v-model.trim=\"workunit.lng\" required=\"true\" autofocus\r\n                            :class=\"{'p-invalid': submitted && !workunit.lng}\" />\r\n                        <small class=\"p-invalid\" v-if=\"submitted && !workunit.lng\">Longitude diperlukan.</small>\r\n                    </div>\r\n                    <div class=\"field\">\r\n                        <label for=\"lng\">Radius</label>\r\n                        <InputText id=\"lng\" v-model.trim=\"workunit.radius\" required=\"true\" autofocus\r\n                            :class=\"{'p-invalid': submitted && !workunit.radius}\" />\r\n                        <small class=\"p-invalid\" v-if=\"submitted && !workunit.radius\">Radius diperlukan.</small>\r\n                    </div>\r\n                    <template #footer>\r\n                        <Button label=\"Cancel\" icon=\"pi pi-times\" class=\"p-button-text\" @click=\"hideDialog\" />\r\n                        <Button label=\"Save\" icon=\"pi pi-check\" class=\"p-button-text\" @click=\"saveWorkunit\" />\r\n                    </template>\r\n                </Dialog>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {FilterMatchMode} from 'primevue/api';\r\nimport WorkunitService from '../../service/WorkunitService';\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            API_URL : process.env.VUE_APP_API_URL,\r\n            loading: false,\r\n            totalRecords: 0,\r\n            workunits: null,\r\n            workunit: {},\r\n            selectedWorkunits: null,\r\n            selectAll: false,\r\n            filters: {},\r\n            lazyParams: {},\r\n            columns: [\r\n                {field: 'id', header: 'ID'},\r\n                {field: 'name', header: 'Nama'},\r\n                {field: 'lat', header: 'Latitute'},\r\n                {field: 'lng', header: 'Longitude'},\r\n                {field: 'radius', header: 'Radius'}\r\n            ],\r\n            workunitDialog: false,\r\n            submitted:false,\r\n        }\r\n    },\r\n    workunitService: null,\r\n    created() {\r\n        this.workunitService = new WorkunitService();\r\n        this.initFilters()\r\n    },\r\n    mounted() {\r\n        this.loading = true;\r\n\r\n        this.lazyParams = {\r\n            first: 0,\r\n            page: 0,\r\n            rows: this.$refs.dt.rows,\r\n            sortField: null,\r\n            sortOrder: 1,\r\n            filters: this.filters\r\n        };\r\n\r\n        this.loadLazyData();\r\n    },\r\n    methods: {\r\n        loadLazyData() {\r\n            this.loading = true;\r\n\r\n            setTimeout(() => {\r\n                this.workunitService.getWorkunits(this.lazyParams)\r\n                        .then(data => {\r\n                            if('redirectTo' in data)\r\n                            {\r\n                                localStorage.removeItem('presence_app_token')\r\n                                localStorage.removeItem('presence_app_role')\r\n                                this.$router.push(data.redirectTo)\r\n                            }\r\n                            this.workunits = data.data;\r\n                            this.totalRecords = data.total;\r\n                            this.loading = false;\r\n                    }\r\n                );\r\n            }, Math.random() * 1000 + 250);\r\n        },\r\n        onPage(event) {\r\n            this.lazyParams = event;\r\n            this.loadLazyData();\r\n        },\r\n        onSort(event) {\r\n            var page = this.lazyParams.page\r\n            this.lazyParams = event;\r\n            this.lazyParams.page = page\r\n            this.loadLazyData();\r\n        },\r\n        onFilter() {\r\n            if(this.onsearchtimeout)\r\n                clearTimeout(this.onsearchtimeout)\r\n            this.onsearchtimeout = setTimeout( () => {\r\n                this.lazyParams.filters = this.filters;\r\n                this.loadLazyData();\r\n            }, 1000)\r\n        },\r\n        onSelectAllChange(event) {\r\n            const selectAll = event.checked;\r\n\r\n            if (selectAll) {\r\n                this.workunitService.getWorkunits().then(data => {\r\n                    if('redirectTo' in data)\r\n                            {\r\n                                localStorage.removeItem('presence_app_token')\r\n                        localStorage.removeItem('presence_app_role')\r\n                                this.$router.push(data.redirectTo)\r\n                            }\r\n                    this.selectAll = true;\r\n                    this.selectedWorkunits = data.data;\r\n                });\r\n            }\r\n            else {\r\n                this.selectAll = false;\r\n                this.selectedWorkunits = [];\r\n            }\r\n        },\r\n        onRowSelect() {\r\n            this.selectAll = this.selectedWorkunits.length === this.totalRecords\r\n        },\r\n        onRowUnselect() {\r\n            this.selectAll = false;\r\n        },\r\n        editWorkunit(workunit) {\r\n\t\t\tthis.workunit = {...workunit};\r\n\t\t\tthis.workunitDialog = true;\r\n\t\t},\r\n        hideDialog() {\r\n\t\t\tthis.workunitDialog = false;\r\n\t\t\tthis.submitted = false;\r\n\t\t},\r\n        saveWorkunit() {\r\n\t\t\tthis.submitted = true;\r\n            // this.workunits[this.findIndexById(this.workunit.id)] = this.workunit;\r\n            this.workunitService.updateWorkunit(this.workunit)\r\n            .then(res => {\r\n                if(!res.success)\r\n                {\r\n                    this.$swal({\r\n                        icon: 'error',\r\n                        title: 'Oops...',\r\n                        text: res.message,\r\n                    })\r\n                }\r\n                else\r\n                {\r\n                    this.workunits[this.findIndexById(this.workunit.id)] = this.workunit;\r\n                    this.$swal({\r\n                        icon: 'success',\r\n                        title: 'Success',\r\n                        text: res.message\r\n                    })\r\n                    this.workunitDialog = false;\r\n                    this.workunit = {};\r\n                }\r\n            })\r\n\t\t},\r\n        findIndexById(id) {\r\n\t\t\tlet index = -1;\r\n\t\t\tfor (let i = 0; i < this.workunits.length; i++) {\r\n\t\t\t\tif (this.workunits[i].id === id) {\r\n\t\t\t\t\tindex = i;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn index;\r\n\t\t},\r\n\t\tinitFilters() {\r\n            this.filters = {\r\n                'global': {value: null, matchMode: FilterMatchMode.CONTAINS},\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>","import { render } from \"./Index.vue?vue&type=template&id=8261233a\"\nimport script from \"./Index.vue?vue&type=script&lang=js\"\nexport * from \"./Index.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["WorkunitService","getWorkunits","lazyParams","params","page","rows","order_by","sortOrder","sortField","filters","global","value","fetch","process","headers","localStorage","getItem","then","res","status","data","redirectTo","json","d","getWorkunit","id","getPresences","type","date_start","date_end","api_url","updateWorkunit","workunit","method","body","JSON","stringify","lat","lng","radius","assignWorktime","worktime_id","deleteWorktime","class","_createElementVNode","for","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_createVNode","_component_DataTable","$data","workunits","lazy","paginator","$event","ref","dataKey","totalRecords","loading","onPage","_cache","$options","onSort","onFilter","globalFilterFields","responsiveLayout","selection","_ctx","selectedCustomers","selectAll","onSelectAllChange","onRowSelect","onRowUnselect","header","_withCtx","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_component_InputText","placeholder","onKeyup","_component_Column","field","sortable","slotProps","_hoisted_8","_toDisplayString","filterMatchMode","headerStyle","_hoisted_9","_component_router_link","to","name","_component_Button","icon","onClick","editWorkunit","_component_Dialog","visible","workunitDialog","style","width","modal","footer","label","hideDialog","saveWorkunit","_hoisted_10","_hoisted_11","trim","required","autofocus","disabled","_hoisted_12","_hoisted_13","_normalizeClass","submitted","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","API_URL","selectedWorkunits","columns","workunitService","created","this","initFilters","mounted","first","$refs","dt","loadLazyData","methods","setTimeout","removeItem","$router","push","total","Math","random","event","onsearchtimeout","clearTimeout","checked","length","success","findIndexById","$swal","title","text","message","index","i","matchMode","FilterMatchMode","CONTAINS","__exports__","render"],"sourceRoot":""}