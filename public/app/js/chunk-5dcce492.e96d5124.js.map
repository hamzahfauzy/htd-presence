{"version":3,"sources":["webpack:///./src/pages/workunits/Index.vue","webpack:///./src/pages/workunits/Index.vue?eddb","webpack:///./src/service/WorkunitService.js"],"names":["class","_createElementVNode","for","_createElementBlock","_createVNode","_component_DataTable","value","$data","lazy","paginator","rows","filters","$event","ref","dataKey","totalRecords","loading","onPage","$options","onSort","onFilter","globalFilterFields","responsiveLayout","selection","_ctx","selectAll","onSelectAllChange","onRowSelect","onRowUnselect","header","_hoisted_5","_hoisted_7","_component_InputText","placeholder","onKeyup","_component_Column","field","sortable","body","slotProps","_hoisted_8","_toDisplayString","data","id","filterMatchMode","headerStyle","_hoisted_9","_component_router_link","to","name","_component_Button","icon","onClick","_component_Dialog","visible","style","width","modal","footer","label","_hoisted_11","trim","required","autofocus","disabled","_hoisted_13","lat","_hoisted_16","lng","_hoisted_19","radius","API_URL","process","workunits","workunit","selectedWorkunits","lazyParams","columns","workunitDialog","submitted","workunitService","created","this","WorkunitService","initFilters","mounted","first","page","$refs","dt","sortField","sortOrder","loadLazyData","methods","setTimeout","getWorkunits","then","localStorage","removeItem","$router","push","redirectTo","total","Math","random","event","onsearchtimeout","clearTimeout","checked","length","editWorkunit","hideDialog","saveWorkunit","updateWorkunit","res","success","findIndexById","$swal","title","text","message","index","i","matchMode","FilterMatchMode","CONTAINS","__exports__","render","params","order_by","global","fetch","headers","getItem","status","json","d","getWorkunit","getPresences","type","date_start","date_end","api_url","method","JSON","stringify","assignWorktime","worktime_id","deleteWorktime"],"mappings":"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","file":"js/chunk-5dcce492.e96d5124.js","sourcesContent":["<template>\r\n    <div class=\"grid\">\r\n        <div class=\"col-12\">\r\n            <div class=\"card\">\r\n                <DataTable :value=\"workunits\" :lazy=\"true\" :paginator=\"true\" :rows=\"10\" v-model:filters=\"filters\"\r\n                    ref=\"dt\" dataKey=\"id\" :totalRecords=\"totalRecords\" :loading=\"loading\" @page=\"onPage($event)\"\r\n                    @sort=\"onSort($event)\" @filter=\"onFilter($event)\" :globalFilterFields=\"['name']\"\r\n                    responsiveLayout=\"scroll\" v-model:selection=\"selectedCustomers\" :selectAll=\"selectAll\"\r\n                    @select-all-change=\"onSelectAllChange\" @row-select=\"onRowSelect\" @row-unselect=\"onRowUnselect\">\r\n                    <template #header>\r\n                        <div class=\"flex flex-column md:flex-row md:justify-content-between md:align-items-center\">\r\n                            <h5 class=\"m-0\">Manajemen OPD / Unit Kerja</h5>\r\n                            <span class=\"block mt-2 md:mt-0 p-input-icon-left\">\r\n                                <i class=\"pi pi-search\" />\r\n                                <InputText v-model=\"filters['global'].value\" placeholder=\"Search...\"\r\n                                    @keyup=\"onFilter\" />\r\n                            </span>\r\n                        </div>\r\n                    </template>\r\n                    <Column field=\"id\" header=\"ID\" :sortable=\"true\">\r\n                        <template #body=\"slotProps\">\r\n                            <span class=\"p-column-title\">ID</span>\r\n                            {{slotProps.data.id}}\r\n                        </template>\r\n                    </Column>\r\n                    <Column field=\"name\" header=\"Nama\" filterMatchMode=\"startsWith\" ref=\"name\" :sortable=\"true\"\r\n                        headerStyle=\"width:20%; min-width:10rem;\">\r\n                        <template #body=\"slotProps\">\r\n                            <span class=\"p-column-title\">Nama</span>\r\n                            <router-link :to='{\"name\":\"workunits.detail\",\"params\":{\"id\":slotProps.data.id}}'>\r\n                                {{slotProps.data.name}}</router-link>\r\n                        </template>\r\n                    </Column>\r\n                    <Column field=\"lat\" header=\"Latitute\" ref=\"lat\"></Column>\r\n                    <Column field=\"lng\" header=\"Longitude\" ref=\"lng\"></Column>\r\n                    <Column field=\"radius\" header=\"Radius\" ref=\"radius\"></Column>\r\n                    <Column header=\"Aksi\">\r\n                        <template #body=\"slotProps\">\r\n                            <Button icon=\"pi pi-pencil\" class=\"p-button-rounded p-button-success mr-2\"\r\n                                @click=\"editWorkunit(slotProps.data)\" />\r\n                        </template>\r\n                    </Column>\r\n                </DataTable>\r\n\r\n                <Dialog v-model:visible=\"workunitDialog\" :style=\"{width: '450px'}\" header=\"Detail OPD\" :modal=\"true\"\r\n                    class=\"p-fluid\">\r\n                    <div class=\"field\">\r\n                        <label for=\"name\">Nama</label>\r\n                        <InputText id=\"name\" v-model.trim=\"workunit.name\" required=\"true\" autofocus disabled />\r\n                    </div>\r\n                    <div class=\"field\">\r\n                        <label for=\"lat\">Latitute</label>\r\n                        <InputText id=\"lat\" v-model.trim=\"workunit.lat\" required=\"true\" autofocus\r\n                            :class=\"{'p-invalid': submitted && !workunit.lat}\" />\r\n                        <small class=\"p-invalid\" v-if=\"submitted && !workunit.lat\">Latitute diperlukan.</small>\r\n                    </div>\r\n                    <div class=\"field\">\r\n                        <label for=\"lng\">Longitude</label>\r\n                        <InputText id=\"lng\" v-model.trim=\"workunit.lng\" required=\"true\" autofocus\r\n                            :class=\"{'p-invalid': submitted && !workunit.lng}\" />\r\n                        <small class=\"p-invalid\" v-if=\"submitted && !workunit.lng\">Longitude diperlukan.</small>\r\n                    </div>\r\n                    <div class=\"field\">\r\n                        <label for=\"lng\">Radius</label>\r\n                        <InputText id=\"lng\" v-model.trim=\"workunit.radius\" required=\"true\" autofocus\r\n                            :class=\"{'p-invalid': submitted && !workunit.radius}\" />\r\n                        <small class=\"p-invalid\" v-if=\"submitted && !workunit.radius\">Radius diperlukan.</small>\r\n                    </div>\r\n                    <template #footer>\r\n                        <Button label=\"Cancel\" icon=\"pi pi-times\" class=\"p-button-text\" @click=\"hideDialog\" />\r\n                        <Button label=\"Save\" icon=\"pi pi-check\" class=\"p-button-text\" @click=\"saveWorkunit\" />\r\n                    </template>\r\n                </Dialog>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {FilterMatchMode} from 'primevue/api';\r\nimport WorkunitService from '../../service/WorkunitService';\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            API_URL : process.env.VUE_APP_API_URL,\r\n            loading: false,\r\n            totalRecords: 0,\r\n            workunits: null,\r\n            workunit: {},\r\n            selectedWorkunits: null,\r\n            selectAll: false,\r\n            filters: {},\r\n            lazyParams: {},\r\n            columns: [\r\n                {field: 'id', header: 'ID'},\r\n                {field: 'name', header: 'Nama'},\r\n                {field: 'lat', header: 'Latitute'},\r\n                {field: 'lng', header: 'Longitude'},\r\n                {field: 'radius', header: 'Radius'}\r\n            ],\r\n            workunitDialog: false,\r\n            submitted:false,\r\n        }\r\n    },\r\n    workunitService: null,\r\n    created() {\r\n        this.workunitService = new WorkunitService();\r\n        this.initFilters()\r\n    },\r\n    mounted() {\r\n        this.loading = true;\r\n\r\n        this.lazyParams = {\r\n            first: 0,\r\n            page: 0,\r\n            rows: this.$refs.dt.rows,\r\n            sortField: null,\r\n            sortOrder: 1,\r\n            filters: this.filters\r\n        };\r\n\r\n        this.loadLazyData();\r\n    },\r\n    methods: {\r\n        loadLazyData() {\r\n            this.loading = true;\r\n\r\n            setTimeout(() => {\r\n                this.workunitService.getWorkunits(this.lazyParams)\r\n                        .then(data => {\r\n                            if('redirectTo' in data)\r\n                            {\r\n                                localStorage.removeItem('presence_app_token')\r\n                                localStorage.removeItem('presence_app_role')\r\n                                this.$router.push(data.redirectTo)\r\n                            }\r\n                            this.workunits = data.data;\r\n                            this.totalRecords = data.total;\r\n                            this.loading = false;\r\n                    }\r\n                );\r\n            }, Math.random() * 1000 + 250);\r\n        },\r\n        onPage(event) {\r\n            this.lazyParams = event;\r\n            this.loadLazyData();\r\n        },\r\n        onSort(event) {\r\n            var page = this.lazyParams.page\r\n            this.lazyParams = event;\r\n            this.lazyParams.page = page\r\n            this.loadLazyData();\r\n        },\r\n        onFilter() {\r\n            if(this.onsearchtimeout)\r\n                clearTimeout(this.onsearchtimeout)\r\n            this.onsearchtimeout = setTimeout( () => {\r\n                this.lazyParams.filters = this.filters;\r\n                this.loadLazyData();\r\n            }, 1000)\r\n        },\r\n        onSelectAllChange(event) {\r\n            const selectAll = event.checked;\r\n\r\n            if (selectAll) {\r\n                this.workunitService.getWorkunits().then(data => {\r\n                    if('redirectTo' in data)\r\n                            {\r\n                                localStorage.removeItem('presence_app_token')\r\n                        localStorage.removeItem('presence_app_role')\r\n                                this.$router.push(data.redirectTo)\r\n                            }\r\n                    this.selectAll = true;\r\n                    this.selectedWorkunits = data.data;\r\n                });\r\n            }\r\n            else {\r\n                this.selectAll = false;\r\n                this.selectedWorkunits = [];\r\n            }\r\n        },\r\n        onRowSelect() {\r\n            this.selectAll = this.selectedWorkunits.length === this.totalRecords\r\n        },\r\n        onRowUnselect() {\r\n            this.selectAll = false;\r\n        },\r\n        editWorkunit(workunit) {\r\n\t\t\tthis.workunit = {...workunit};\r\n\t\t\tthis.workunitDialog = true;\r\n\t\t},\r\n        hideDialog() {\r\n\t\t\tthis.workunitDialog = false;\r\n\t\t\tthis.submitted = false;\r\n\t\t},\r\n        saveWorkunit() {\r\n\t\t\tthis.submitted = true;\r\n            // this.workunits[this.findIndexById(this.workunit.id)] = this.workunit;\r\n            this.workunitService.updateWorkunit(this.workunit)\r\n            .then(res => {\r\n                if(!res.success)\r\n                {\r\n                    this.$swal({\r\n                        icon: 'error',\r\n                        title: 'Oops...',\r\n                        text: res.message,\r\n                    })\r\n                }\r\n                else\r\n                {\r\n                    this.workunits[this.findIndexById(this.workunit.id)] = this.workunit;\r\n                    this.$swal({\r\n                        icon: 'success',\r\n                        title: 'Success',\r\n                        text: res.message\r\n                    })\r\n                    this.workunitDialog = false;\r\n                    this.workunit = {};\r\n                }\r\n            })\r\n\t\t},\r\n        findIndexById(id) {\r\n\t\t\tlet index = -1;\r\n\t\t\tfor (let i = 0; i < this.workunits.length; i++) {\r\n\t\t\t\tif (this.workunits[i].id === id) {\r\n\t\t\t\t\tindex = i;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn index;\r\n\t\t},\r\n\t\tinitFilters() {\r\n            this.filters = {\r\n                'global': {value: null, matchMode: FilterMatchMode.CONTAINS},\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>","import { render } from \"./Index.vue?vue&type=template&id=8261233a\"\nimport script from \"./Index.vue?vue&type=script&lang=js\"\nexport * from \"./Index.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\Project\\\\DSI\\\\htd-presence-fe\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export default class WorkunitService {\r\n\r\n\tgetWorkunits(lazyParams) {\r\n        // const queryParams = params ? Object.keys(params).map(k => encodeURIComponent(k) + '=' + encodeURIComponent(params[k])).join('&') : '';\r\n        \r\n        var params = ''\r\n        if(lazyParams){\r\n            params = '?page='+(lazyParams.page+1)+'&per_page='+lazyParams.rows\r\n            var order_by = lazyParams.sortOrder == 1 ? 'asc' : 'desc';\r\n            params +='&order_by='+order_by\r\n            if(lazyParams.sortField != null)\r\n            {\r\n                params += '&sort_by='+lazyParams.sortField\r\n            }\r\n\r\n            if(lazyParams.filters.global.value)\r\n            {\r\n                params += '&keyword='+lazyParams.filters.global.value\r\n            }\r\n        }else{\r\n            params = \"?all=1&order_by=asc\"\r\n        }\r\n\r\n\t\treturn fetch(process.env.VUE_APP_API_URL+'workunits' + params,{\r\n            headers:{\r\n                'authorization' : 'Bearer '+localStorage.getItem('presence_app_token')\r\n            }\r\n        })\r\n        .then(res => {\r\n            if(res.status == 401)\r\n            {\r\n                return {data:{redirectTo:\"Login\"}};\r\n            }\r\n            return res.json()\r\n        })\r\n        .then(d => d.data);\r\n    }\r\n\r\n    getWorkunit(id) {\r\n\t\treturn fetch(process.env.VUE_APP_API_URL+'workunits/' + id,{\r\n            headers:{\r\n                'authorization' : 'Bearer '+localStorage.getItem('presence_app_token')\r\n            }\r\n        })\r\n        .then(res => {\r\n            if(res.status == 401)\r\n            {\r\n                return {data:{redirectTo:\"login\"}};\r\n            }\r\n            return res.json()\r\n        })\r\n        .then(d => d.data);\r\n    }\r\n\r\n    getPresences(lazyParams, id = false, type = false) {\r\n\r\n        var params = ''\r\n        if(lazyParams){\r\n            params = 'page='+(lazyParams.page+1)+'&per_page='+lazyParams.rows\r\n            var order_by = lazyParams.sortOrder == 1 ? 'asc' : 'desc';\r\n            params +='&order_by='+order_by\r\n            if(lazyParams.sortField != null)\r\n            {\r\n                params += '&sort_by='+lazyParams.sortField\r\n            }\r\n    \r\n            if(lazyParams.filters.global.value)\r\n            {\r\n                params += '&keyword='+lazyParams.filters.global.value\r\n            }\r\n\r\n            if(lazyParams.date_start != null && lazyParams.date_end != null)\r\n            {\r\n                params += '&date_start='+lazyParams.date_start+'&date_end='+lazyParams.date_end\r\n            }\r\n        }\r\n\r\n        if(type){\r\n            params += '&type='+type\r\n        }\r\n\r\n        var api_url = id ? process.env.VUE_APP_API_URL+'workunits/' + id + '/presences?'+params : process.env.VUE_APP_API_URL+'workunits/presences?'+params\r\n\r\n\t\treturn fetch(api_url,{\r\n            headers:{\r\n                'authorization' : 'Bearer '+localStorage.getItem('presence_app_token')\r\n            }\r\n        })\r\n        .then(res => {\r\n            if(res.status == 401)\r\n            {\r\n                return {data:{redirectTo:\"login\"}};\r\n            }\r\n            return res.json()\r\n        })\r\n        .then(d => d.data);\r\n    }\r\n\r\n    updateWorkunit(workunit){\r\n        return fetch(process.env.VUE_APP_API_URL+'workunits/'+workunit.id+'/place',{\r\n            method:'PATCH',\r\n            headers:{\r\n                'authorization' : 'Bearer '+localStorage.getItem('presence_app_token'),\r\n                'Content-type': 'application/json; charset=UTF-8',\r\n            },\r\n            body:JSON.stringify({\r\n                lat:workunit.lat,\r\n                lng:workunit.lng,\r\n                radius:workunit.radius,\r\n            })\r\n        })\r\n        .then(res => {\r\n            if(res.status == 401)\r\n            {\r\n                return {redirectTo:\"Login\"};\r\n            }\r\n            return res.json()\r\n        })\r\n    }\r\n\r\n    assignWorktime(workunit, data){\r\n        return fetch(process.env.VUE_APP_API_URL+'workunits/'+workunit.id+'/worktime',{\r\n            method:'PATCH',\r\n            headers:{\r\n                'authorization' : 'Bearer '+localStorage.getItem('presence_app_token'),\r\n                'Content-type': 'application/json; charset=UTF-8',\r\n            },\r\n            body:JSON.stringify({\r\n                worktime_id:data.worktime_id\r\n            })\r\n        })\r\n        .then(res => {\r\n            if(res.status == 401)\r\n            {\r\n                return {redirectTo:\"Login\"};\r\n            }\r\n            return res.json()\r\n        })\r\n    }\r\n\r\n    deleteWorktime(workunit, data){\r\n        return fetch(process.env.VUE_APP_API_URL+'workunits/'+workunit.id+'/worktime',{\r\n            method:'DELETE',\r\n            headers:{\r\n                'authorization' : 'Bearer '+localStorage.getItem('presence_app_token'),\r\n                'Content-type': 'application/json; charset=UTF-8',\r\n            },\r\n            body:JSON.stringify({\r\n                worktime_id:data.id\r\n            })\r\n        })\r\n        .then(res => {\r\n            if(res.status == 401)\r\n            {\r\n                return {redirectTo:\"Login\"};\r\n            }\r\n            return res.json()\r\n        })\r\n    }\r\n\t\r\n}"],"sourceRoot":""}