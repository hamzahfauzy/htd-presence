(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-146ee937"],{"172d":function(t,e,r){"use strict";r.r(e);r("b0c0"),r("b64b");var i=r("7a23"),n={class:"grid"},o={class:"col-12"},a={class:"card"},s=Object(i["j"])("div",{class:"font-medium text-3xl text-900 mb-3"},"Detail OPD",-1),c={class:"list-none p-0 m-0"},u={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},l=Object(i["j"])("div",{class:"text-500 w-6 md:w-2 font-medium"},"Nama",-1),d={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},p={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},k=Object(i["j"])("div",{class:"text-500 w-6 md:w-2 font-medium"},"Latitude",-1),f={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},m={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},b=Object(i["j"])("div",{class:"text-500 w-6 md:w-2 font-medium"},"Longitude",-1),h={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},j={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},w=Object(i["j"])("div",{class:"text-500 w-6 md:w-2 font-medium"},"Radius",-1),g={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"};function O(t,e,r,O,v,y){var _=Object(i["H"])("DetailWorktime");return Object(i["z"])(),Object(i["i"])("div",n,[Object(i["j"])("div",o,[Object(i["j"])("div",a,[s,Object(i["j"])("ul",c,[Object(i["j"])("li",u,[l,Object(i["j"])("div",d,Object(i["L"])(v.workunit.name),1)]),Object(i["j"])("li",p,[k,Object(i["j"])("div",f,Object(i["L"])(v.workunit.lat),1)]),Object(i["j"])("li",m,[b,Object(i["j"])("div",h,Object(i["L"])(v.workunit.lng),1)]),Object(i["j"])("li",j,[w,Object(i["j"])("div",g,Object(i["L"])(v.workunit.radius),1)])])])]),0!=Object.keys(v.workunit).length?(Object(i["z"])(),Object(i["g"])(_,{key:0,workunit:v.workunit,workunitService:t.workunitService},null,8,["workunit","workunitService"])):Object(i["h"])("",!0)])}var v=r("fca4"),y={class:"col-12"},_={class:"card"},W={class:"my-2"},S=Object(i["j"])("div",{class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},[Object(i["j"])("h5",{class:"m-0"},"Detail Jam Kerja")],-1),x=Object(i["j"])("span",{class:"p-column-title"},"ID",-1),D={class:"field"},T=Object(i["j"])("label",{for:"name"},"Jam Kerja",-1),I={key:0,class:"p-invalid"};function C(t,e,r,n,o,a){var s=Object(i["H"])("Button"),c=Object(i["H"])("Toolbar"),u=Object(i["H"])("Column"),l=Object(i["H"])("DataTable"),d=Object(i["H"])("Dropdown"),p=Object(i["H"])("Dialog");return Object(i["z"])(),Object(i["i"])("div",y,[Object(i["j"])("div",_,[Object(i["m"])(c,{class:"mb-4"},{start:Object(i["S"])((function(){return[Object(i["j"])("div",W,[Object(i["m"])(s,{label:"New",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:a.openNew},null,8,["onClick"])])]})),_:1}),Object(i["m"])(l,{value:o.workunitWorktimes,ref:"dt",dataKey:"id",responsiveLayout:"scroll"},{header:Object(i["S"])((function(){return[S]})),default:Object(i["S"])((function(){return[Object(i["m"])(u,{field:"id",header:"ID",sortable:!0},{body:Object(i["S"])((function(t){return[x,Object(i["l"])(" "+Object(i["L"])(t.data.id),1)]})),_:1}),Object(i["m"])(u,{field:"name",header:"Nama"}),Object(i["m"])(u,{header:"Aksi"},{body:Object(i["S"])((function(t){return[t.data.id?(Object(i["z"])(),Object(i["g"])(s,{key:0,icon:"pi pi-trash",class:"p-button-rounded p-button-warning mt-2",onClick:function(e){return a.confirmDelete(t.data)}},null,8,["onClick"])):Object(i["h"])("",!0)]})),_:1})]})),_:1},8,["value"]),Object(i["m"])(p,{visible:o.workunitWorktimeDialog,"onUpdate:visible":e[1]||(e[1]=function(t){return o.workunitWorktimeDialog=t}),style:{width:"450px"},header:"Form Detail Jam Kerja",modal:!0,class:"p-fluid"},{footer:Object(i["S"])((function(){return[Object(i["m"])(s,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:a.hideDialog},null,8,["onClick"]),Object(i["m"])(s,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:a.saveWorktime},null,8,["onClick"])]})),default:Object(i["S"])((function(){return[Object(i["j"])("div",D,[T,Object(i["m"])(d,{modelValue:o.workunitWorktime.worktime_id,"onUpdate:modelValue":e[0]||(e[0]=function(t){return o.workunitWorktime.worktime_id=t}),options:o.worktimes,optionLabel:"name",optionValue:"id",placeholder:"Pilih Jam Kerja",class:Object(i["t"])({"p-invalid":o.submitted&&!o.workunitWorktime.worktime_id})},null,8,["modelValue","options","class"]),o.submitted&&!o.workunitWorktime.worktime_id?(Object(i["z"])(),Object(i["i"])("small",I,"Jam kerja diperlukan.")):Object(i["h"])("",!0)])]})),_:1},8,["visible"])])])}var P=r("5530"),L=(r("4de4"),r("d3b7"),r("7db0"),r("7467")),z={props:{workunit:{},workunitService:null},data:function(){return{loading:!1,worktimes:null,workunitWorktimes:null,workunitWorktime:{},filters:{},lazyParams:{},columns:[{field:"id",header:"ID"},{field:"name",header:"Nama"}],workunitWorktimeDialog:!1,submitted:!1}},worktimeService:null,created:function(){this.worktimeService=new L["a"],this.workunitWorktimes=this.workunit.worktimes},mounted:function(){this.initData()},methods:{initData:function(){var t=this;this.worktimeService.getAllWorktimes().then((function(e){t.worktimes=e}))},openNew:function(){this.workunitWorktime={},this.submitted=!1,this.workunitWorktimeDialog=!0},editPlace:function(t){this.workunitWorktime=Object(P["a"])({},t),this.workunitWorktimeDialog=!0},confirmDelete:function(t){var e=this;this.workunitWorktime=t,this.$swal({title:"Apakah anda yakin akan menghapus data ini ?",showCancelButton:!0,confirmButtonText:"Hapus"}).then((function(t){t.isConfirmed&&e.workunitService.deleteWorktime(e.workunit,e.workunitWorktime).then((function(t){"redirectTo"in t&&(localStorage.removeItem("presence_app_token"),localStorage.removeItem("presence_app_role"),e.$router.push(t.redirectTo)),t.success?(e.workunitWorktimes=e.workunitWorktimes.filter((function(t){return t.id!==e.workunitWorktime.id})),e.$swal({icon:"success",title:"Success",text:t.message}),e.workunitWorktimeDialog=!1,e.workunitWorktime={}):e.$swal({icon:"error",title:"Oops...",text:t.message})}))}))},hideDialog:function(){this.workunitWorktimeDialog=!1,this.submitted=!1},saveWorktime:function(){var t=this;this.submitted=!0,this.workunitService.assignWorktime(this.workunit,this.workunitWorktime).then((function(e){if("redirectTo"in e&&(localStorage.removeItem("presence_app_token"),localStorage.removeItem("presence_app_role"),t.$router.push(e.redirectTo)),e.success){t.$swal({icon:"success",title:"Success",text:e.message});var r=t.worktimes.find((function(e){return e.id===t.workunitWorktime.worktime_id}));t.workunitWorktimes=[{id:r.id,name:r.name}],t.workunitWorktimeDialog=!1,t.workunitWorktime={}}else t.$swal({icon:"error",title:"Oops...",text:e.message})}))},findIndexById:function(t){for(var e=-1,r=0;r<this.workunitWorktimes.length;r++)if(this.workunitWorktimes[r].id===t){e=r;break}return e}}},B=r("6b0d"),F=r.n(B);const J=F()(z,[["render",C]]);var N=J,H={components:{DetailWorktime:N},data:function(){return{workunitId:null,workunit:{},submitted:!1}},workunitService:null,created:function(){this.workunitId=this.$route.params.id,this.workunitService=new v["a"]},mounted:function(){this.initData()},methods:{initData:function(){var t=this;this.workunitService.getWorkunit(this.workunitId).then((function(e){t.workunit=e}))}}};const A=F()(H,[["render",O]]);e["default"]=A},"4de4":function(t,e,r){"use strict";var i=r("23e7"),n=r("b727").filter,o=r("1dde"),a=o("filter");i({target:"Array",proto:!0,forced:!a},{filter:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},5530:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));r("b64b"),r("a4d3"),r("4de4"),r("d3b7"),r("e439"),r("159b"),r("dbb4");function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}},7467:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var i=r("d4ec"),n=r("bee2"),o=(r("d3b7"),r("e9c4"),function(){function t(){Object(i["a"])(this,t)}return Object(n["a"])(t,[{key:"getWorktimes",value:function(t){var e="page="+(t.page+1)+"&per_page="+t.rows,r=1==t.sortOrder?"asc":"desc";return e+="&order_by="+r,null!=t.sortField&&(e+="&sort_by="+t.sortField),t.filters.global.value&&(e+="&keyword="+t.filters.global.value),fetch("https://sisapa.tanjungbalaikota.go.id/api/worktimes?"+e,{headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token")}}).then((function(t){return 401==t.status?{data:{redirectTo:"login"}}:t.json()})).then((function(t){return t.data}))}},{key:"getAllWorktimes",value:function(){return fetch("https://sisapa.tanjungbalaikota.go.id/api/worktimes?response=array",{headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token")}}).then((function(t){return 401==t.status?{data:{redirectTo:"login"}}:t.json()})).then((function(t){return t.data}))}},{key:"createWorktime",value:function(t){return fetch("https://sisapa.tanjungbalaikota.go.id/api/worktimes",{method:"POST",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)}).then((function(t){return 401==t.status?{redirectTo:"Login"}:t.json()}))}},{key:"updateWorktime",value:function(t){return fetch("https://sisapa.tanjungbalaikota.go.id/api/worktimes/"+t.id,{method:"PUT",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)}).then((function(t){return 401==t.status?{redirectTo:"Login"}:t.json()}))}},{key:"deleteWorktime",value:function(t){return fetch("https://sisapa.tanjungbalaikota.go.id/api/worktimes/"+t.id,{method:"DELETE",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)}).then((function(t){return 401==t.status?{redirectTo:"Login"}:t.json()}))}}]),t}())},"7db0":function(t,e,r){"use strict";var i=r("23e7"),n=r("b727").find,o=r("44d2"),a="find",s=!0;a in[]&&Array(1)[a]((function(){s=!1})),i({target:"Array",proto:!0,forced:s},{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),o(a)},dbb4:function(t,e,r){var i=r("23e7"),n=r("83ab"),o=r("56ef"),a=r("fc6a"),s=r("06cf"),c=r("8418");i({target:"Object",stat:!0,sham:!n},{getOwnPropertyDescriptors:function(t){var e,r,i=a(t),n=s.f,u=o(i),l={},d=0;while(u.length>d)r=n(i,e=u[d++]),void 0!==r&&c(l,e,r);return l}})},e439:function(t,e,r){var i=r("23e7"),n=r("d039"),o=r("fc6a"),a=r("06cf").f,s=r("83ab"),c=n((function(){a(1)})),u=!s||c;i({target:"Object",stat:!0,forced:u,sham:!s},{getOwnPropertyDescriptor:function(t,e){return a(o(t),e)}})},fca4:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var i=r("d4ec"),n=r("bee2"),o=(r("d3b7"),r("e9c4"),function(){function t(){Object(i["a"])(this,t)}return Object(n["a"])(t,[{key:"getWorkunits",value:function(t){var e="";if(t){e="?page="+(t.page+1)+"&per_page="+t.rows;var r=1==t.sortOrder?"asc":"desc";e+="&order_by="+r,null!=t.sortField&&(e+="&sort_by="+t.sortField),t.filters.global.value&&(e+="&keyword="+t.filters.global.value)}else e="?all=1&order_by=asc";return fetch("https://sisapa.tanjungbalaikota.go.id/api/workunits"+e,{headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token")}}).then((function(t){return 401==t.status?{data:{redirectTo:"Login"}}:t.json()})).then((function(t){return t.data}))}},{key:"getWorkunit",value:function(t){return fetch("https://sisapa.tanjungbalaikota.go.id/api/workunits/"+t,{headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token")}}).then((function(t){return 401==t.status?{data:{redirectTo:"login"}}:t.json()})).then((function(t){return t.data}))}},{key:"getPresences",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i="";if(t){i="page="+(t.page+1)+"&per_page="+t.rows;var n=1==t.sortOrder?"asc":"desc";i+="&order_by="+n,null!=t.sortField&&(i+="&sort_by="+t.sortField),t.filters.global.value&&(i+="&keyword="+t.filters.global.value),null!=t.date_start&&null!=t.date_end&&(i+="&date_start="+t.date_start+"&date_end="+t.date_end)}r&&(i+="&type="+r);var o=e?"https://sisapa.tanjungbalaikota.go.id/api/workunits/"+e+"/presences?"+i:"https://sisapa.tanjungbalaikota.go.id/api/workunits/presences?"+i;return fetch(o,{headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token")}}).then((function(t){return 401==t.status?{data:{redirectTo:"login"}}:t.json()})).then((function(t){return t.data}))}},{key:"updateWorkunit",value:function(t){return fetch("https://sisapa.tanjungbalaikota.go.id/api/workunits/"+t.id+"/place",{method:"PATCH",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({lat:t.lat,lng:t.lng,radius:t.radius})}).then((function(t){return 401==t.status?{redirectTo:"Login"}:t.json()}))}},{key:"assignWorktime",value:function(t,e){return fetch("https://sisapa.tanjungbalaikota.go.id/api/workunits/"+t.id+"/worktime",{method:"PATCH",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({worktime_id:e.worktime_id})}).then((function(t){return 401==t.status?{redirectTo:"Login"}:t.json()}))}},{key:"deleteWorktime",value:function(t,e){return fetch("https://sisapa.tanjungbalaikota.go.id/api/workunits/"+t.id+"/worktime",{method:"DELETE",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({worktime_id:e.id})}).then((function(t){return 401==t.status?{redirectTo:"Login"}:t.json()}))}}]),t}())}}]);
//# sourceMappingURL=chunk-146ee937.31d313d1.js.map