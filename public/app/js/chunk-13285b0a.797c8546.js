(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-13285b0a"],{"06d6":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));class r{getEmployees(e,t=!1){var a="";if(e){a="page="+(e.page+1)+"&per_page="+e.rows;var r=1==e.sortOrder?"asc":"desc";a+="&order_by="+r,null!=e.sortField&&(a+="&sort_by="+e.sortField),e.filters.global.value&&(a+="&keyword="+e.filters.global.value)}var s=JSON.parse(localStorage.getItem("presence_user_data"));return s.workunit_id&&(a+="&workunit_id="+s.workunit_id),t&&(a+="&workunit_id="+t),fetch("https://sisapa.tanjungbalaikota.go.id/api/employees?"+a,{headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token")}}).then(e=>401==e.status?{data:{redirectTo:"login"}}:e.json()).then(e=>e.data)}getEmployeesReport(e,t){var a="";if(e){a="page="+(e.page+1)+"&per_page="+e.rows;var r=1==e.sortOrder?"asc":"desc";a+="&order_by="+r,null!=e.sortField&&(a+="&sort_by="+e.sortField),e.filters.global.value&&(a+="&keyword="+e.filters.global.value),null!=e.date_start&&null!=e.date_end&&(a+="&date_start="+e.date_start+"&date_end="+e.date_end)}return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/reports/"+t+"?"+a,{headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token")}}).then(e=>401==e.status?{data:{redirectTo:"login"}}:e.json()).then(e=>e.data)}getEmployeesReportDetail(e,t){var a="";if(e){a="page="+(e.page+1)+"&per_page="+e.rows;var r=1==e.sortOrder?"asc":"desc";a+="&order_by="+r,null!=e.sortField&&(a+="&sort_by="+e.sortField),e.filters.global.value&&(a+="&keyword="+e.filters.global.value),null!=e.date_start&&null!=e.date_end&&(a+="&date_start="+e.date_start+"&date_end="+e.date_end)}return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/report-details/"+t+"?"+a,{headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token")}}).then(e=>401==e.status?{data:{redirectTo:"login"}}:e.json()).then(e=>e.data)}getEmployeesReportPdfLink(e,t){var a="";if(e){var r=1==e.sortOrder?"asc":"desc";a+="&order_by="+r,null!=e.sortField&&(a+="&sort_by="+e.sortField),e.filters.global.value&&(a+="&keyword="+e.filters.global.value),null!=e.date_start&&null!=e.date_end&&(a+="&date_start="+e.date_start+"&date_end="+e.date_end)}return"https://sisapa.tanjungbalaikota.go.id/api/employees/report-pdf/"+t+"?"+a}getEmployeesReportDetailPdfLink(e,t){var a="";if(e){var r=1==e.sortOrder?"asc":"desc";a+="&order_by="+r,null!=e.sortField&&(a+="&sort_by="+e.sortField),e.filters.global.value&&(a+="&keyword="+e.filters.global.value),null!=e.date_start&&null!=e.date_end&&(a+="&date_start="+e.date_start+"&date_end="+e.date_end)}return"https://sisapa.tanjungbalaikota.go.id/api/employees/report-detail-pdf/"+t+"?"+a}getEmployee(e){return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/"+e,{headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token")}}).then(e=>401==e.status?{data:{redirectTo:"login"}}:e.json()).then(e=>e.data)}getPresence(e,t){return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/"+e+"/presences/"+t,{headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token")}}).then(e=>401==e.status?{data:{redirectTo:"login"}}:e.json()).then(e=>e.data)}updateEmployee(e){return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/"+e.id+"/place",{method:"PATCH",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({lat:e.lat,lng:e.lng,radius:e.radius})}).then(e=>401==e.status?{redirectTo:"Login"}:e.json())}updateRole(e,t){var a={...e};return a.role=t,fetch("https://sisapa.tanjungbalaikota.go.id/api/users/"+e.id,{method:"PUT",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(a)}).then(e=>401==e.status?{redirectTo:"Login"}:e.json())}addPlace(e,t){return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/"+e.id+"/place",{method:"POST",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)}).then(e=>401==e.status?{redirectTo:"Login"}:e.json())}deletePlace(e,t){return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/"+e.id+"/place",{method:"DELETE",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({place_id:t.id})}).then(e=>401==e.status?{redirectTo:"Login"}:e.json())}patchPlace(e){return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/"+e.id+"/place",{method:"PATCH",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"}}).then(e=>401==e.status?{redirectTo:"Login"}:e.json())}patchAndroid(e){return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/"+e.id+"/android-user",{method:"PATCH",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"}}).then(e=>401==e.status?{redirectTo:"Login"}:e.json())}resetDevice(e){return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/"+e.id+"/reset-device",{method:"POST",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"}}).then(e=>401==e.status?{redirectTo:"Login"}:e.json())}addWorktime(e,t){return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/"+e.id+"/worktime",{method:"POST",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)}).then(e=>401==e.status?{redirectTo:"Login"}:e.json())}deleteWorktime(e,t){return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/"+e.id+"/worktime",{method:"DELETE",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({worktime_id:t.id})}).then(e=>401==e.status?{redirectTo:"Login"}:e.json())}actionPresence(e,t){return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/"+t.employee_id+"/presences/"+t.id,{method:"PATCH",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token"),"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({status:e})}).then(e=>401==e.status?{redirectTo:"Login"}:e.json())}insertPresence(e,t){return fetch("https://sisapa.tanjungbalaikota.go.id/api/employees/"+e+"/presences",{method:"POST",headers:{authorization:"Bearer "+localStorage.getItem("presence_app_token")},body:t}).then(e=>401==e.status?{redirectTo:"Login"}:e.json())}}},2404:function(e,t,a){"use strict";a.r(t);var r=a("7a23");const s={class:"grid"},o={class:"col-12"},i={class:"card"},n={class:"flex justify-content-between mb-3 align-items-center"},l={class:"font-medium text-3xl text-900"},c={key:0,class:"list-none p-0 m-0"},d={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},p=Object(r["j"])("div",{class:"text-500 w-6 md:w-2 font-medium"},"Pegawai",-1),u={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},m={key:0,class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},b=Object(r["j"])("div",{class:"text-500 w-6 md:w-2 font-medium"},"Jadwal",-1),j={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},g={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},h=Object(r["j"])("div",{class:"text-500 w-6 md:w-2 font-medium"},"OPD",-1),f={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},y={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},O=Object(r["j"])("div",{class:"text-500 w-6 md:w-2 font-medium"},"Tipe",-1),_={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},w={key:1,class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},x=Object(r["j"])("div",{class:"text-500 w-6 md:w-2 font-medium"},"Di lokasi",-1),k={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},v={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},T=Object(r["j"])("div",{class:"text-500 w-6 md:w-2 font-medium"},"Status",-1),S={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},z={key:2,class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},L=Object(r["j"])("div",{class:"text-500 w-6 md:w-2 font-medium"},"Waktu Mulai",-1),I={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},P={key:3,class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},F=Object(r["j"])("div",{class:"text-500 w-6 md:w-2 font-medium"},"Waktu Selesai",-1),B={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},C={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},E=Object(r["j"])("div",{class:"text-500 w-6 md:w-2 font-medium"},"Tanggal",-1),D={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},J={key:4,class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},U=Object(r["j"])("div",{class:"text-500 w-6 md:w-2 font-medium"},"Selfi",-1),N={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},A=["src"],H={class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},R=Object(r["j"])("div",{class:"text-500 w-6 md:w-2 font-medium"},"Lampiran",-1),$={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},W=["href"],Y={key:5,class:"flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"},q=Object(r["j"])("div",{class:"text-500 w-6 md:w-2 font-medium"},"Lokasi",-1),M={class:"text-900 w-full md:w-8 md:flex-order-0 flex-order-1"},G=["src"];function K(e,t,a,K,Q,V){var X;const Z=Object(r["H"])("Button");return Object(r["z"])(),Object(r["i"])("div",s,[Object(r["j"])("div",o,[Object(r["j"])("div",i,[Object(r["j"])("div",n,[Object(r["j"])("div",l,"Detail "+Object(r["L"])(Q.presence.presence_id?"Absensi":Q.presence.type.includes("tugas")?Q.presence.type:"Cuti"),1),Object(r["j"])("div",null,["diajukan"==Q.presence.status?(Object(r["z"])(),Object(r["g"])(Z,{key:0,icon:"pi pi-check",class:"p-button-rounded p-button-success mr-2",onClick:t[0]||(t[0]=e=>V.action("setujui",Q.presence))})):Object(r["h"])("",!0),"diajukan"==Q.presence.status?(Object(r["z"])(),Object(r["g"])(Z,{key:1,icon:"pi pi-times",class:"p-button-rounded p-button-danger mr-2",onClick:t[1]||(t[1]=e=>V.action("tolak",Q.presence))})):Object(r["h"])("",!0)])]),Q.presence.employee?(Object(r["z"])(),Object(r["i"])("ul",c,[Object(r["j"])("li",d,[p,Object(r["j"])("div",u,Object(r["L"])(Q.presence.employee.nip+" - "+Q.presence.employee.name),1)]),Q.presence.presence_id?(Object(r["z"])(),Object(r["i"])("li",m,[b,Object(r["j"])("div",j,Object(r["L"])(null===(X=Q.presence.worktime_item)||void 0===X?void 0:X.name),1)])):Object(r["h"])("",!0),Object(r["j"])("li",g,[h,Object(r["j"])("div",f,Object(r["L"])(Q.presence.workunit.name),1)]),Object(r["j"])("li",y,[O,Object(r["j"])("div",_,Object(r["L"])(Q.presence.type),1)]),Q.presence.presence_id?(Object(r["z"])(),Object(r["i"])("li",w,[x,Object(r["j"])("div",k,Object(r["L"])(1==Q.presence.in_location?"Ya":"Tidak"),1)])):Object(r["h"])("",!0),Object(r["j"])("li",v,[T,Object(r["j"])("div",S,Object(r["L"])(Q.presence.status),1)]),null==Q.presence.presence_id||"tugas luar"==Q.presence.type?(Object(r["z"])(),Object(r["i"])("li",z,[L,Object(r["j"])("div",I,Object(r["L"])(Q.presence.started_at),1)])):Object(r["h"])("",!0),null==Q.presence.presence_id||"tugas luar"==Q.presence.type?(Object(r["z"])(),Object(r["i"])("li",P,[F,Object(r["j"])("div",B,Object(r["L"])(Q.presence.finished_at),1)])):Object(r["h"])("",!0),Object(r["j"])("li",C,[E,Object(r["j"])("div",D,Object(r["L"])(Q.presence.created_at),1)]),Q.presence.presence_id?(Object(r["z"])(),Object(r["i"])("li",J,[U,Object(r["j"])("div",N,[Q.presence.pic_url?(Object(r["z"])(),Object(r["i"])("img",{key:0,src:Q.storage_url+Q.presence.pic_url,style:{width:"250px"}},null,8,A)):Object(r["h"])("",!0)])])):Object(r["h"])("",!0),Object(r["j"])("li",H,[R,Object(r["j"])("div",$,[Q.presence.attachment_url?(Object(r["z"])(),Object(r["i"])("a",{key:0,href:Q.storage_url+Q.presence.attachment_url,target:"_blank"},"Download",8,W)):Object(r["h"])("",!0)])]),Q.presence.presence_id?(Object(r["z"])(),Object(r["i"])("li",Y,[q,Object(r["j"])("div",M,[Object(r["j"])("iframe",{width:"500",height:"300",src:"//maps.google.com/maps?q="+Q.presence.lat+","+Q.presence.lng+"&z=15&output=embed",allowfullscreen:"",style:{border:"0"},referrerpolicy:"no-referrer-when-downgrade"},null,8,G)])])):Object(r["h"])("",!0)])):Object(r["h"])("",!0)])])])}var Q=a("06d6"),V={data(){return{employeeId:null,presenceId:null,presence:{},submitted:!1,storage_url:"https://sisapa.tanjungbalaikota.go.id/storage/"}},employeeService:null,created(){this.presenceId=this.$route.params.id,this.employeeId=this.$route.params.employee_id,this.employeeService=new Q["a"],this.initData()},methods:{initData(){this.employeeService.getPresence(this.employeeId,this.presenceId).then(e=>{this.presence=e,console.log(e)})},action(e,t){this.$swal({title:"Apakah anda yakin akan "+e+" data ini ?",showCancelButton:!0,confirmButtonText:"Ya"}).then(a=>{a.isConfirmed&&this.employeeService.actionPresence("di"+e,t).then(e=>{e.success?(this.$swal({icon:"success",title:"Success",text:e.message}),this.initData()):this.$swal({icon:"error",title:"Oops...",text:e.message})})})}}},X=a("6b0d"),Z=a.n(X);const ee=Z()(V,[["render",K]]);t["default"]=ee}}]);
//# sourceMappingURL=chunk-13285b0a.797c8546.js.map