{"version":3,"file":"js/339.a638e585.js","mappings":"gJAAe,MAAMA,EAEpBC,YAAAA,CAAaC,GAGN,IAAIC,EAAS,GACb,GAAGD,EAAW,CACVC,EAAS,UAAUD,EAAWE,KAAK,GAAG,aAAaF,EAAWG,KAC9D,IAAIC,EAAmC,GAAxBJ,EAAWK,UAAiB,MAAQ,OACnDJ,GAAS,aAAaG,EACK,MAAxBJ,EAAWM,YAEVL,GAAU,YAAYD,EAAWM,WAGlCN,EAAWO,QAAQC,OAAOC,QAEzBR,GAAU,YAAYD,EAAWO,QAAQC,OAAOC,MAExD,MACIR,EAAS,sBAGnB,OAAOS,MAAMC,sDAA0CV,EAAO,CACpDW,QAAQ,CACJ,cAAkB,UAAUC,aAAaC,QAAQ,yBAGxDC,MAAKC,GACe,KAAdA,EAAIC,OAEI,CAACC,KAAK,CAACC,WAAW,UAEtBH,EAAII,SAEdL,MAAKM,GAAKA,EAAEH,MACjB,CAEAI,WAAAA,CAAYC,GACd,OAAOb,MAAMC,uDAA2CY,EAAG,CACjDX,QAAQ,CACJ,cAAkB,UAAUC,aAAaC,QAAQ,yBAGxDC,MAAKC,GACe,KAAdA,EAAIC,OAEI,CAACC,KAAK,CAACC,WAAW,UAEtBH,EAAII,SAEdL,MAAKM,GAAKA,EAAEH,MACjB,CAEAM,YAAAA,CAAaxB,EAAYuB,GAAK,EAAOE,GAAO,GAExC,IAAIxB,EAAS,GACb,GAAGD,EAAW,CACVC,EAAS,SAASD,EAAWE,KAAK,GAAG,aAAaF,EAAWG,KAC7D,IAAIC,EAAmC,GAAxBJ,EAAWK,UAAiB,MAAQ,OACnDJ,GAAS,aAAaG,EACK,MAAxBJ,EAAWM,YAEVL,GAAU,YAAYD,EAAWM,WAGlCN,EAAWO,QAAQC,OAAOC,QAEzBR,GAAU,YAAYD,EAAWO,QAAQC,OAAOC,OAGxB,MAAzBT,EAAW0B,YAA6C,MAAvB1B,EAAW2B,WAE3C1B,GAAU,eAAeD,EAAW0B,WAAW,aAAa1B,EAAW2B,SAE/E,CAEGF,IACCxB,GAAU,SAASwB,GAGvB,IAAIG,EAAUL,EAAKZ,uDAA2CY,EAAK,cAActB,EAASU,iEAAmDV,EAEnJ,OAAOS,MAAMkB,EAAQ,CACXhB,QAAQ,CACJ,cAAkB,UAAUC,aAAaC,QAAQ,yBAGxDC,MAAKC,GACe,KAAdA,EAAIC,OAEI,CAACC,KAAK,CAACC,WAAW,UAEtBH,EAAII,SAEdL,MAAKM,GAAKA,EAAEH,MACjB,CAEAW,cAAAA,CAAeC,GACX,OAAOpB,MAAMC,uDAAyCmB,EAASP,GAAG,SAAS,CACvEQ,OAAO,QACPnB,QAAQ,CACJ,cAAkB,UAAUC,aAAaC,QAAQ,sBACjD,eAAgB,mCAEpBkB,KAAKC,KAAKC,UAAU,CAChBC,IAAIL,EAASK,IACbC,IAAIN,EAASM,IACbC,OAAOP,EAASO,WAGvBtB,MAAKC,GACe,KAAdA,EAAIC,OAEI,CAACE,WAAW,SAEhBH,EAAII,QAEnB,CAEAkB,cAAAA,CAAeR,EAAUZ,GACrB,OAAOR,MAAMC,uDAAyCmB,EAASP,GAAG,YAAY,CAC1EQ,OAAO,QACPnB,QAAQ,CACJ,cAAkB,UAAUC,aAAaC,QAAQ,sBACjD,eAAgB,mCAEpBkB,KAAKC,KAAKC,UAAU,CAChBK,YAAYrB,EAAKqB,gBAGxBxB,MAAKC,GACe,KAAdA,EAAIC,OAEI,CAACE,WAAW,SAEhBH,EAAII,QAEnB,CAEAoB,cAAAA,CAAeV,EAAUZ,GACrB,OAAOR,MAAMC,uDAAyCmB,EAASP,GAAG,YAAY,CAC1EQ,OAAO,SACPnB,QAAQ,CACJ,cAAkB,UAAUC,aAAaC,QAAQ,sBACjD,eAAgB,mCAEpBkB,KAAKC,KAAKC,UAAU,CAChBK,YAAYrB,EAAKK,OAGxBR,MAAKC,GACe,KAAdA,EAAIC,OAEI,CAACE,WAAW,SAEhBH,EAAII,QAEnB,E,qGC7JKqB,MAAM,Q,GACFA,MAAM,U,GACFA,MAAM,Q,GAGMA,MAAM,e,GA4BPC,EAAAA,EAAAA,GAAsC,QAAhCD,MAAM,kBAAiB,MAAE,G,GAW/BC,EAAAA,EAAAA,GAAwC,QAAlCD,MAAM,kBAAiB,QAAI,G,iMA5CzDE,EAAAA,EAAAA,IAmDM,MAnDNC,EAmDM,EAlDFF,EAAAA,EAAAA,GAiDM,MAjDNG,EAiDM,EAhDFH,EAAAA,EAAAA,GA+CM,MA/CNI,EA+CM,EA9CFC,EAAAA,EAAAA,IAmBUC,EAAA,CAnBDP,MAAM,QAAM,CACAQ,OAAKC,EAAAA,EAAAA,KAClB,IAeM,EAfNR,EAAAA,EAAAA,GAeM,MAfNS,EAeM,EAbFJ,EAAAA,EAAAA,IAC+EK,EAAA,CADrEC,WAAW,WAAYC,UAAU,EAAOC,eAAe,E,WAAeC,EAAA9B,W,qCAAA8B,EAAA9B,WAAU+B,GACtFhB,MAAM,MAAMiB,YAAY,qBAAsBC,aAAaC,EAAAC,c,uCAC/Dd,EAAAA,EAAAA,IACgFK,EAAA,CADtEC,WAAW,WAAYC,UAAU,EAAOC,eAAe,E,WAAeC,EAAA7B,S,qCAAA6B,EAAA7B,SAAQ8B,GACpFhB,MAAM,MAAMiB,YAAY,sBAAuBC,aAAaC,EAAAC,c,qFAGPC,SAASN,EAAAO,QAAI,WADtEC,EAAAA,EAAAA,IAE0EC,EAAA,C,iBAFvDT,EAAAU,OAAOC,Y,qCAAPX,EAAAU,OAAOC,YAAWV,GAAGW,QAASZ,EAAAa,UAAWC,YAAY,OAEpEC,YAAY,KAAK9B,MAAM,MAAMiB,YAAY,YAAac,QAAQ,G,mDAElEzB,EAAAA,EAAAA,IACqFkB,EAAA,C,WADlET,EAAAU,OAAOO,Y,qCAAPjB,EAAAU,OAAOO,YAAWhB,GAAGW,QAAS,CAAC,CAADM,KAAA,eAAAjE,MAAA,iBAAAiE,KAAA,SAAAjE,MAAA,WAA6E6D,YAAY,OACtIC,YAAY,QAAQ9B,MAAM,MAAMiB,YAAY,oBAAqBc,QAAQ,G,wBAE7EzB,EAAAA,EAAAA,IAAkF4B,EAAA,CAA1EC,MAAM,eAAenC,MAAM,uBAAwBoC,QAAKC,EAAA,KAAAA,EAAA,GAAArB,GAAEG,EAAAmB,qB,OAI9EhC,EAAAA,EAAAA,IAyBYiC,EAAA,CAzBAvE,MAAO+C,EAAAyB,QAAUC,MAAM,EAAc3E,QAASiD,EAAAjD,Q,kCAAAiD,EAAAjD,QAAOkD,GAC7D0B,IAAI,KAAKC,QAAQ,KAAMC,QAAS7B,EAAA6B,QAAUC,mBAAoB,CAAC,QACvDC,UAAWC,EAAAC,kB,oCAAAD,EAAAC,kBAAiBhC,GAAGiC,UAAWlC,EAAAkC,UAAYC,kBAAmBH,EAAAG,kBAChFC,YAAYJ,EAAAI,YAAcC,cAAcL,EAAAK,cACzCC,kBAAkB,uGACjBC,mBAAoB,CAAC,EAAD,OACrBC,0BAA0B,uDAC1BC,iBAAiB,U,mBACjB,IAKS,EALTlD,EAAAA,EAAAA,IAKSmD,EAAA,CALDC,MAAM,KAAKC,OAAO,KAAMC,UAAU,G,CAC3BrE,MAAIkB,EAAAA,EAAAA,KAAEoD,GAAS,CACtBC,GAAsC,aACtCC,EAAAA,EAAAA,IAAEF,EAAUpF,KAAKK,IAAE,M,OAG3BwB,EAAAA,EAAAA,IAAiEmD,EAAA,CAAzDC,MAAM,gBAAgBC,OAAO,sBACrCrD,EAAAA,EAAAA,IAAwDmD,EAAA,CAAhDC,MAAM,WAAWC,OAAO,kBAChCrD,EAAAA,EAAAA,IAAuDmD,EAAA,CAA/CC,MAAM,SAASC,OAAO,mBAC9BrD,EAAAA,EAAAA,IAAgDmD,EAAA,CAAxCC,MAAM,SAASC,OAAO,YAC9BrD,EAAAA,EAAAA,IAMSmD,EAAA,CANDC,MAAM,WAAWC,OAAO,OAC5BK,YAAY,+B,CACDzE,MAAIkB,EAAAA,EAAAA,KAAEoD,GAAS,CACtBI,EACyCJ,EAAUpF,KAAKyF,WAAQ,WAAhEhE,EAAAA,EAAAA,IAAmF,K,MAA/EiE,KAAMN,EAAUpF,KAAKyF,UAAyC,gBAAa,EAAAE,KAAA,kB,6JC9C5F,MAAMC,EAEpBC,UAAAA,CAAW5C,GAAc,GAGlB,IAAIlE,EAAS,GACT+G,EAAW/E,KAAKgF,MAAMpG,aAAaC,QAAQ,uBAWrD,OAVSkG,EAAS7C,cAERlE,GAAU,gBAAgB+G,EAAS7C,aAGpCA,IAEClE,GAAU,gBAAgBkE,GAG7BzD,MAAMC,6DAAiDV,EAAO,CAC3DW,QAAQ,CACJ,cAAkB,UAAUC,aAAaC,QAAQ,yBAGxDC,MAAKC,GACe,KAAdA,EAAIC,OAEI,CAACC,KAAK,CAACC,WAAW,UAEtBH,EAAII,SAEdL,MAAKM,GAAKA,EAAEH,MACjB,CAEAgG,YAAAA,CAAahG,GACT,IAAI8F,EAAW/E,KAAKgF,MAAMpG,aAAaC,QAAQ,uBAM/C,OALGkG,EAAS7C,cAERjD,EAAKiD,YAAc6C,EAAS7C,aAGzBzD,MAAMC,4DAA8C,CACvDoB,OAAO,OACPnB,QAAQ,CACJ,cAAkB,UAAUC,aAAaC,QAAQ,sBACjD,eAAgB,mCAEpBkB,KAAKC,KAAKC,UAAU,CAChBiC,YAAYjD,EAAKiD,YACjBgD,SAASjG,EAAKiG,SACdC,OAAOlG,EAAKkG,OACZ3C,YAAYvD,EAAKuD,gBAGxB1D,MAAKC,GACe,KAAdA,EAAIC,OAEI,CAACE,WAAW,SAEhBH,EAAII,QAEnB,EDAJ,OACIF,IAAAA,GACI,MAAO,CACHmE,SAAS,EACTJ,QAAQ,GACRoC,gBAAiB,KACjBC,aAAc,EACd5B,WAAW,EACXnF,QAAS,CAAC,EACVP,WAAY,CAAC,EACb0B,WAAW,KACXC,SAAS,KACT4F,YAAY,KACZC,UAAU,KACVtD,OAAQ,CACJO,YAAY,KACZ0C,SAAS,KACTC,OAAO,KACPjD,YAAY,MAEhBE,UAAU,GACVoD,iBAAiB,CAAC,EAClB1D,KAAKlD,aAAaC,QAAQ,qBAC1B4G,OAAO,CACH,IAAM,gBACN,eAAe,WACf,gBAAgB,SAChB,OAAS,SACT,WAAW,YAGvB,EACAC,gBAAiB,KACjBC,cAAe,KACfC,OAAAA,GACIC,KAAKH,gBAAkB,IAAI7H,EAAAA,EAC3BgI,KAAKF,cAAgB,IAAId,EACzBgB,KAAKC,aACT,EACAC,OAAAA,GACIF,KAAKzC,SAAU,EAEfyC,KAAK9H,WAAa,CACdiI,MAAO,EACP/H,KAAM,EACNC,KAAM2H,KAAKI,MAAMC,GAAGhI,KACpBG,UAAW,KACXD,UAAW,EACXqB,WAAW,KACXC,SAAS,KACTpB,QAASuH,KAAKvH,SAGlBuH,KAAKM,cACT,EACAC,QAAS,CACLD,YAAAA,GACIN,KAAKzC,SAAU,EAEf,IAAI2B,EAAW/E,KAAKgF,MAAMpG,aAAaC,QAAQ,uBAC5CkG,EAAS7C,cAAa2D,KAAKL,iBAAiBlG,GAAKyF,EAAS7C,aAE7DmE,YAAW,KAEPR,KAAKH,gBAAgB5H,eAChBgB,MAAKG,IACE,eAAgBA,IAChBL,aAAa0H,WAAW,sBACxB1H,aAAa0H,WAAW,qBACxBT,KAAKU,QAAQC,KAAKvH,EAAKC,aAE3B2G,KAAKzD,UAAYnD,EAAKA,KACtB4G,KAAKzC,SAAU,CAAK,IAI5ByC,KAAKF,cAAcb,WAAWe,KAAKL,iBAAmBK,KAAKL,iBAAiBlG,GAAK,CAAC,GAC7ER,MAAKG,IACE,eAAgBA,IAChBL,aAAa0H,WAAW,sBACxB1H,aAAa0H,WAAW,qBACxBT,KAAKU,QAAQC,KAAKvH,EAAKC,aAE3B2G,KAAK7C,QAAU/D,EAAKA,KACpB4G,KAAKR,aAAepG,EAAKwH,MACzBZ,KAAKzC,SAAU,CAAK,GAEvB,GACU,IAAhBsD,KAAKC,SAAkB,IAC9B,EACAC,MAAAA,CAAOC,GACHhB,KAAK9H,WAAa8I,EAClBhB,KAAKM,cACT,EACAW,MAAAA,CAAOD,GACH,IAAI5I,EAAO4H,KAAK9H,WAAWE,KAC3B4H,KAAK9H,WAAa8I,EAClBhB,KAAK9H,WAAWE,KAAOA,EACvB4H,KAAKM,cACT,EACAY,QAAAA,GACOlB,KAAKT,iBACJ4B,aAAanB,KAAKT,iBACtBS,KAAKT,gBAAkBiB,YAAY,KAC/BR,KAAK9H,WAAWO,QAAUuH,KAAKvH,QAC/BuH,KAAKM,cAAc,GACpB,IACP,EAEAc,aAAAA,GACIC,OAAOC,KAAKtB,KAAKuB,gBAAgBC,0BAA0BxB,KAAK9H,WAAY8H,KAAKL,iBAAiBlG,IAAMuG,KAAKd,SAAS7C,aAC1H,EAEAN,YAAAA,GACI,GAAIiE,KAAKpG,WAAY,CACjB,IAAIL,EAAIyG,KAAKpG,WACT6H,EAAMlI,EAAEmI,UAAY,GAAK,IAAMnI,EAAEmI,UAAYnI,EAAEmI,UAC/CC,EAASpI,EAAEqI,WAAa,EAAK,GAAK,KAAOrI,EAAEqI,WAAa,GAAMrI,EAAEqI,WAAa,EACjF5B,KAAK5D,OAAOiD,SAAW9F,EAAEsI,cAAgB,IAAMF,EAAQ,IAAMF,CACjE,CAEA,GAAIzB,KAAKnG,SAAU,CACf,IAAIN,EAAIyG,KAAKnG,SACT4H,EAAMlI,EAAEmI,UAAY,GAAK,IAAMnI,EAAEmI,UAAYnI,EAAEmI,UAC/CC,EAASpI,EAAEqI,WAAa,EAAK,GAAK,KAAOrI,EAAEqI,WAAa,GAAMrI,EAAEqI,WAAa,EACjF5B,KAAK5D,OAAOkD,OAAS/F,EAAEsI,cAAgB,IAAMF,EAAQ,IAAMF,CAC/D,CACJ,EAEAK,QAAAA,GAGI,GAFA9B,KAAK9H,WAAWO,QAAUuH,KAAKvH,QAE3BuH,KAAKpG,WAAY,CACjB,IAAIL,EAAIyG,KAAKpG,WACT6H,EAAMlI,EAAEmI,UAAY,GAAK,IAAMnI,EAAEmI,UAAYnI,EAAEmI,UAC/CC,EAASpI,EAAEqI,WAAa,EAAK,GAAK,KAAOrI,EAAEqI,WAAa,GAAMrI,EAAEqI,WAAa,EACjF5B,KAAK9H,WAAW0B,WAAaL,EAAEsI,cAAgB,IAAMF,EAAQ,IAAMF,CACvE,CAEA,GAAIzB,KAAKnG,SAAU,CACf,IAAIN,EAAIyG,KAAKnG,SACT4H,EAAMlI,EAAEmI,UAAY,GAAK,IAAMnI,EAAEmI,UAAYnI,EAAEmI,UAC/CC,EAASpI,EAAEqI,WAAa,EAAK,GAAK,KAAOrI,EAAEqI,WAAa,GAAMrI,EAAEqI,WAAa,EACjF5B,KAAK9H,WAAW2B,SAAWN,EAAEsI,cAAgB,IAAMF,EAAQ,IAAMF,CACrE,CAEAzB,KAAKM,cACT,EAEAyB,yBAAAA,GACI/B,KAAKH,gBAAgBrG,YAAYwG,KAAKgC,UAAU3F,aAC/CpD,MAAKG,IACE,eAAgBA,IAChBL,aAAa0H,WAAW,sBACxB1H,aAAa0H,WAAW,qBACxBT,KAAKU,QAAQC,KAAKvH,EAAKC,aAE3B2G,KAAKiC,UAAY7I,EAAK6I,SAAS,GAEvC,EACNhC,WAAAA,GACUD,KAAKvH,QAAU,CACX,OAAU,CAACE,MAAO,KAAMuJ,UAAWC,EAAAA,GAAgBC,UAE3D,EACAnF,UAAAA,GACL+C,KAAKF,cAAcV,aAAaY,KAAK5D,QAC3BnD,MAAKC,IACEA,EAAImJ,SAUJrC,KAAKM,eACLN,KAAKsC,iBAAkB,EACvBtC,KAAKuC,UAAY,CAAC,EAClBvC,KAAKwC,MAAM,CACPC,KAAM,UACNC,MAAO,UACPC,KAAMzJ,EAAI0J,WAdd5C,KAAKwC,MAAM,CACPC,KAAM,QACNC,MAAO,UACPC,KAAMzJ,EAAI0J,SAalB,GAEd,I,UElPF,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://sakai-vue/./src/service/WorkunitService.js","webpack://sakai-vue/./src/pages/reports/Request.vue","webpack://sakai-vue/./src/service/ReportRequestService.js","webpack://sakai-vue/./src/pages/reports/Request.vue?16e7"],"sourcesContent":["export default class WorkunitService {\r\n\r\n\tgetWorkunits(lazyParams) {\r\n        // const queryParams = params ? Object.keys(params).map(k => encodeURIComponent(k) + '=' + encodeURIComponent(params[k])).join('&') : '';\r\n        \r\n        var params = ''\r\n        if(lazyParams){\r\n            params = '?page='+(lazyParams.page+1)+'&per_page='+lazyParams.rows\r\n            var order_by = lazyParams.sortOrder == 1 ? 'asc' : 'desc';\r\n            params +='&order_by='+order_by\r\n            if(lazyParams.sortField != null)\r\n            {\r\n                params += '&sort_by='+lazyParams.sortField\r\n            }\r\n\r\n            if(lazyParams.filters.global.value)\r\n            {\r\n                params += '&keyword='+lazyParams.filters.global.value\r\n            }\r\n        }else{\r\n            params = \"?all=1&order_by=asc\"\r\n        }\r\n\r\n\t\treturn fetch(process.env.VUE_APP_API_URL+'workunits' + params,{\r\n            headers:{\r\n                'authorization' : 'Bearer '+localStorage.getItem('presence_app_token')\r\n            }\r\n        })\r\n        .then(res => {\r\n            if(res.status == 401)\r\n            {\r\n                return {data:{redirectTo:\"Login\"}};\r\n            }\r\n            return res.json()\r\n        })\r\n        .then(d => d.data);\r\n    }\r\n\r\n    getWorkunit(id) {\r\n\t\treturn fetch(process.env.VUE_APP_API_URL+'workunits/' + id,{\r\n            headers:{\r\n                'authorization' : 'Bearer '+localStorage.getItem('presence_app_token')\r\n            }\r\n        })\r\n        .then(res => {\r\n            if(res.status == 401)\r\n            {\r\n                return {data:{redirectTo:\"login\"}};\r\n            }\r\n            return res.json()\r\n        })\r\n        .then(d => d.data);\r\n    }\r\n\r\n    getPresences(lazyParams, id = false, type = false) {\r\n\r\n        var params = ''\r\n        if(lazyParams){\r\n            params = 'page='+(lazyParams.page+1)+'&per_page='+lazyParams.rows\r\n            var order_by = lazyParams.sortOrder == 1 ? 'asc' : 'desc';\r\n            params +='&order_by='+order_by\r\n            if(lazyParams.sortField != null)\r\n            {\r\n                params += '&sort_by='+lazyParams.sortField\r\n            }\r\n    \r\n            if(lazyParams.filters.global.value)\r\n            {\r\n                params += '&keyword='+lazyParams.filters.global.value\r\n            }\r\n\r\n            if(lazyParams.date_start != null && lazyParams.date_end != null)\r\n            {\r\n                params += '&date_start='+lazyParams.date_start+'&date_end='+lazyParams.date_end\r\n            }\r\n        }\r\n\r\n        if(type){\r\n            params += '&type='+type\r\n        }\r\n\r\n        var api_url = id ? process.env.VUE_APP_API_URL+'workunits/' + id + '/presences?'+params : process.env.VUE_APP_API_URL+'workunits/presences?'+params\r\n\r\n\t\treturn fetch(api_url,{\r\n            headers:{\r\n                'authorization' : 'Bearer '+localStorage.getItem('presence_app_token')\r\n            }\r\n        })\r\n        .then(res => {\r\n            if(res.status == 401)\r\n            {\r\n                return {data:{redirectTo:\"login\"}};\r\n            }\r\n            return res.json()\r\n        })\r\n        .then(d => d.data);\r\n    }\r\n\r\n    updateWorkunit(workunit){\r\n        return fetch(process.env.VUE_APP_API_URL+'workunits/'+workunit.id+'/place',{\r\n            method:'PATCH',\r\n            headers:{\r\n                'authorization' : 'Bearer '+localStorage.getItem('presence_app_token'),\r\n                'Content-type': 'application/json; charset=UTF-8',\r\n            },\r\n            body:JSON.stringify({\r\n                lat:workunit.lat,\r\n                lng:workunit.lng,\r\n                radius:workunit.radius,\r\n            })\r\n        })\r\n        .then(res => {\r\n            if(res.status == 401)\r\n            {\r\n                return {redirectTo:\"Login\"};\r\n            }\r\n            return res.json()\r\n        })\r\n    }\r\n\r\n    assignWorktime(workunit, data){\r\n        return fetch(process.env.VUE_APP_API_URL+'workunits/'+workunit.id+'/worktime',{\r\n            method:'PATCH',\r\n            headers:{\r\n                'authorization' : 'Bearer '+localStorage.getItem('presence_app_token'),\r\n                'Content-type': 'application/json; charset=UTF-8',\r\n            },\r\n            body:JSON.stringify({\r\n                worktime_id:data.worktime_id\r\n            })\r\n        })\r\n        .then(res => {\r\n            if(res.status == 401)\r\n            {\r\n                return {redirectTo:\"Login\"};\r\n            }\r\n            return res.json()\r\n        })\r\n    }\r\n\r\n    deleteWorktime(workunit, data){\r\n        return fetch(process.env.VUE_APP_API_URL+'workunits/'+workunit.id+'/worktime',{\r\n            method:'DELETE',\r\n            headers:{\r\n                'authorization' : 'Bearer '+localStorage.getItem('presence_app_token'),\r\n                'Content-type': 'application/json; charset=UTF-8',\r\n            },\r\n            body:JSON.stringify({\r\n                worktime_id:data.id\r\n            })\r\n        })\r\n        .then(res => {\r\n            if(res.status == 401)\r\n            {\r\n                return {redirectTo:\"Login\"};\r\n            }\r\n            return res.json()\r\n        })\r\n    }\r\n\t\r\n}","<template>\r\n    <div class=\"grid\">\r\n        <div class=\"col-12\">\r\n            <div class=\"card\">\r\n                <Toolbar class=\"mb-4\">\r\n                    <template v-slot:start>\r\n                        <div class=\"my-2 d-flex\">\r\n\r\n                            <Calendar dateFormat=\"yy-mm-dd\" :showIcon=\"true\" :showButtonBar=\"true\" v-model=\"date_start\"\r\n                                class=\"m-2\" placeholder=\"Pilih Tanggal Awal\" @date-select=\"onDateChange\" />\r\n                            <Calendar dateFormat=\"yy-mm-dd\" :showIcon=\"true\" :showButtonBar=\"true\" v-model=\"date_end\"\r\n                                class=\"m-2\" placeholder=\"Pilih Tanggal Akhir\" @date-select=\"onDateChange\" />\r\n\r\n                            <Dropdown v-model=\"report.workunit_id\" :options=\"workunits\" optionLabel=\"name\"\r\n                                v-if=\"['superuser','adminsistem','adminkepegawaian'].includes(role)\"\r\n                                optionValue=\"id\" class=\"m-2\" placeholder=\"Pilih OPD\" :filter=\"true\" />\r\n                            \r\n                            <Dropdown v-model=\"report.report_type\" :options=\"[{name:'Rekapitulasi',value:'rekapitulasi'},{name:'Detail',value:'detail'}]\" optionLabel=\"name\"\r\n                                optionValue=\"value\" class=\"m-2\" placeholder=\"Pilih Report Type\" :filter=\"true\" />\r\n\r\n                            <Button label=\"Buat Laporan\" class=\"p-button-success m-2\" @click=\"saveReport()\" />\r\n                        </div>\r\n                    </template>\r\n                </Toolbar>\r\n                <DataTable :value=\"reports\" :lazy=\"true\" v-model:filters=\"filters\"\r\n                    ref=\"dt\" dataKey=\"id\" :loading=\"loading\" :globalFilterFields=\"['name']\"\r\n                    v-model:selection=\"selectedCustomers\" :selectAll=\"selectAll\" @select-all-change=\"onSelectAllChange\"\r\n                    @row-select=\"onRowSelect\" @row-unselect=\"onRowUnselect\"\r\n                    paginatorTemplate=\"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown\"\r\n                    :rowsPerPageOptions=\"[5,10,25]\"\r\n                    currentPageReportTemplate=\"Showing {first} to {last} of {totalRecords} products\"\r\n                    responsiveLayout=\"scroll\">\r\n                    <Column field=\"id\" header=\"ID\" :sortable=\"true\">\r\n                        <template #body=\"slotProps\">\r\n                            <span class=\"p-column-title\">ID</span>\r\n                            {{slotProps.data.id}}\r\n                        </template>\r\n                    </Column>\r\n                    <Column field=\"workunit.name\" header=\"OPD / Unit Kerja\"></Column>\r\n                    <Column field=\"start_at\" header=\"Tanggal Awal\"></Column>\r\n                    <Column field=\"end_at\" header=\"Tanggal Akhir\"></Column>\r\n                    <Column field=\"status\" header=\"Status\"></Column>\r\n                    <Column field=\"file_url\" header=\"File\" \r\n                        headerStyle=\"width:20%; min-width:10rem;\">\r\n                        <template #body=\"slotProps\">\r\n                            <span class=\"p-column-title\">File</span>\r\n                            <a :href=\"slotProps.data.file_url\" v-if=\"slotProps.data.file_url\">Download File</a>\r\n                        </template>\r\n                    </Column>\r\n                </DataTable>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {FilterMatchMode} from 'primevue/api';\r\nimport WorkunitService from '../../service/WorkunitService';\r\nimport ReportRequestService from '../../service/ReportRequestService';\r\nexport default {\r\n    data() {\r\n        return {\r\n            loading: false,\r\n            reports:[],\r\n            onsearchtimeout: null,\r\n            totalRecords: 0,\r\n            selectAll: false,\r\n            filters: {},\r\n            lazyParams: {},\r\n            date_start:null,\r\n            date_end:null,\r\n            cdate_start:null,\r\n            cdate_end:null,\r\n            report: {\r\n                report_type:null,\r\n                start_at:null,\r\n                end_at:null,\r\n                workunit_id:null,\r\n            },\r\n            workunits:[],\r\n            selectedWorkunit:{},\r\n            role:localStorage.getItem(\"presence_app_role\"),\r\n            fields:{\r\n                'OPD':'workunit.name',\r\n                'Tanggal Awal':'start_at',\r\n                'Tanggal Akhir':'end_at',\r\n                'Status':'status',\r\n                'File URL':'file_url',\r\n            }\r\n        }\r\n    },\r\n    workunitService: null,\r\n    reportService: null,\r\n    created() {\r\n        this.workunitService = new WorkunitService();\r\n        this.reportService = new ReportRequestService();\r\n        this.initFilters()\r\n    },\r\n    mounted() {\r\n        this.loading = true;\r\n\r\n        this.lazyParams = {\r\n            first: 0,\r\n            page: 0,\r\n            rows: this.$refs.dt.rows,\r\n            sortField: null,\r\n            sortOrder: 1,\r\n            date_start:null,\r\n            date_end:null,\r\n            filters: this.filters\r\n        };\r\n\r\n        this.loadLazyData();\r\n    },\r\n    methods: {\r\n        loadLazyData() {\r\n            this.loading = true;\r\n\r\n            var userData = JSON.parse(localStorage.getItem(\"presence_user_data\"))\r\n            if(userData.workunit_id) this.selectedWorkunit.id = userData.workunit_id\r\n\r\n            setTimeout(() => {\r\n\r\n                this.workunitService.getWorkunits()\r\n                    .then(data => {\r\n                        if ('redirectTo' in data) {\r\n                            localStorage.removeItem('presence_app_token')\r\n                            localStorage.removeItem('presence_app_role')\r\n                            this.$router.push(data.redirectTo)\r\n                        }\r\n                        this.workunits = data.data;\r\n                        this.loading = false;\r\n                    }\r\n                    );\r\n\r\n                this.reportService.getReports(this.selectedWorkunit ? this.selectedWorkunit.id : {})\r\n                    .then(data => {\r\n                        if ('redirectTo' in data) {\r\n                            localStorage.removeItem('presence_app_token')\r\n                            localStorage.removeItem('presence_app_role')\r\n                            this.$router.push(data.redirectTo)\r\n                        }\r\n                        this.reports = data.data;\r\n                        this.totalRecords = data.total;\r\n                        this.loading = false;\r\n                    }\r\n                    );\r\n            }, Math.random() * 1000 + 250);\r\n        },\r\n        onPage(event) {\r\n            this.lazyParams = event;\r\n            this.loadLazyData();\r\n        },\r\n        onSort(event) {\r\n            var page = this.lazyParams.page\r\n            this.lazyParams = event;\r\n            this.lazyParams.page = page\r\n            this.loadLazyData();\r\n        },\r\n        onFilter() {\r\n            if(this.onsearchtimeout)\r\n                clearTimeout(this.onsearchtimeout)\r\n            this.onsearchtimeout = setTimeout( () => {\r\n                this.lazyParams.filters = this.filters;\r\n                this.loadLazyData();\r\n            }, 1000)\r\n        },\r\n\r\n        onDownloadPdf() {\r\n            window.open(this.employeeService.getEmployeesReportPdfLink(this.lazyParams, this.selectedWorkunit.id ?? this.userData.workunit_id))\r\n        },\r\n        \r\n        onDateChange(){\r\n            if (this.date_start) {\r\n                let d = this.date_start\r\n                let day = d.getDate() < 10 ? \"0\" + d.getDate() : d.getDate()\r\n                let month = (d.getMonth() + 1) < 10 ? \"0\" + (d.getMonth() + 1) : (d.getMonth() + 1)\r\n                this.report.start_at = d.getFullYear() + \"-\" + month + \"-\" + day\r\n            }\r\n            \r\n            if (this.date_end) {\r\n                let d = this.date_end\r\n                let day = d.getDate() < 10 ? \"0\" + d.getDate() : d.getDate()\r\n                let month = (d.getMonth() + 1) < 10 ? \"0\" + (d.getMonth() + 1) : (d.getMonth() + 1)\r\n                this.report.end_at = d.getFullYear() + \"-\" + month + \"-\" + day\r\n            }\r\n        },\r\n\r\n        onSearch(){\r\n            this.lazyParams.filters = this.filters;\r\n\r\n            if (this.date_start) {\r\n                let d = this.date_start\r\n                let day = d.getDate() < 10 ? \"0\" + d.getDate() : d.getDate()\r\n                let month = (d.getMonth() + 1) < 10 ? \"0\" + (d.getMonth() + 1) : (d.getMonth() + 1)\r\n                this.lazyParams.date_start = d.getFullYear() + \"-\" + month + \"-\" + day\r\n            }\r\n\r\n            if (this.date_end) {\r\n                let d = this.date_end\r\n                let day = d.getDate() < 10 ? \"0\" + d.getDate() : d.getDate()\r\n                let month = (d.getMonth() + 1) < 10 ? \"0\" + (d.getMonth() + 1) : (d.getMonth() + 1)\r\n                this.lazyParams.date_end = d.getFullYear() + \"-\" + month + \"-\" + day\r\n            }\r\n\r\n            this.loadLazyData();\r\n        },\r\n        \r\n        onPengajuanWorkunitChange() {\r\n            this.workunitService.getWorkunit(this.pengajuan.workunit_id)\r\n            .then(data => {\r\n                if ('redirectTo' in data) {\r\n                    localStorage.removeItem('presence_app_token')\r\n                    localStorage.removeItem('presence_app_role')\r\n                    this.$router.push(data.redirectTo)\r\n                }\r\n                this.employees = data.employees;\r\n            });\r\n        },\r\n\t\tinitFilters() {\r\n            this.filters = {\r\n                'global': {value: null, matchMode: FilterMatchMode.CONTAINS},\r\n            }\r\n        },\r\n        saveReport() {\r\n\t\t\tthis.reportService.createReport(this.report)\r\n            .then(res => {\r\n                if(!res.success)\r\n                {\r\n                    this.$swal({\r\n                        icon: 'error',\r\n                        title: 'Oops...',\r\n                        text: res.message,\r\n                    })\r\n                }\r\n                else\r\n                {\r\n                    this.loadLazyData()\r\n                    this.paidLeaveDialog = false;\r\n                    this.paidLeave = {};\r\n                    this.$swal({\r\n                        icon: 'success',\r\n                        title: 'Success',\r\n                        text: res.message\r\n                    })\r\n                }\r\n            })\r\n\t\t},\r\n    }\r\n}\r\n</script>","export default class ReportRequestService {\r\n\r\n\tgetReports(workunit_id = false) {\r\n        // const queryParams = params ? Object.keys(params).map(k => encodeURIComponent(k) + '=' + encodeURIComponent(params[k])).join('&') : '';\r\n\r\n        var params = ''\r\n        var userData = JSON.parse(localStorage.getItem('presence_user_data'))\r\n        if(userData.workunit_id)\r\n        {\r\n            params += '&workunit_id='+userData.workunit_id;\r\n        }\r\n\r\n        if(workunit_id)\r\n        {\r\n            params += '&workunit_id='+workunit_id;\r\n        }\r\n        \r\n\t\treturn fetch(process.env.VUE_APP_API_URL+'report-requests?' + params,{\r\n            headers:{\r\n                'authorization' : 'Bearer '+localStorage.getItem('presence_app_token')\r\n            }\r\n        })\r\n        .then(res => {\r\n            if(res.status == 401)\r\n            {\r\n                return {data:{redirectTo:\"login\"}};\r\n            }\r\n            return res.json()\r\n        })\r\n        .then(d => d.data);\r\n    }\r\n\r\n    createReport(data){\r\n        var userData = JSON.parse(localStorage.getItem('presence_user_data'))\r\n        if(userData.workunit_id)\r\n        {\r\n            data.workunit_id = userData.workunit_id\r\n        }\r\n\r\n        return fetch(process.env.VUE_APP_API_URL+'report-requests',{\r\n            method:'POST',\r\n            headers:{\r\n                'authorization' : 'Bearer '+localStorage.getItem('presence_app_token'),\r\n                'Content-type': 'application/json; charset=UTF-8',\r\n            },\r\n            body:JSON.stringify({\r\n                workunit_id:data.workunit_id,\r\n                start_at:data.start_at,\r\n                end_at:data.end_at,\r\n                report_type:data.report_type,\r\n            })\r\n        })\r\n        .then(res => {\r\n            if(res.status == 401)\r\n            {\r\n                return {redirectTo:\"Login\"};\r\n            }\r\n            return res.json()\r\n        })\r\n    }\r\n\t\r\n}","import { render } from \"./Request.vue?vue&type=template&id=90c8e44e\"\nimport script from \"./Request.vue?vue&type=script&lang=js\"\nexport * from \"./Request.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["WorkunitService","getWorkunits","lazyParams","params","page","rows","order_by","sortOrder","sortField","filters","global","value","fetch","process","headers","localStorage","getItem","then","res","status","data","redirectTo","json","d","getWorkunit","id","getPresences","type","date_start","date_end","api_url","updateWorkunit","workunit","method","body","JSON","stringify","lat","lng","radius","assignWorktime","worktime_id","deleteWorktime","class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_createVNode","_component_Toolbar","start","_withCtx","_hoisted_4","_component_Calendar","dateFormat","showIcon","showButtonBar","$data","$event","placeholder","onDateSelect","$options","onDateChange","includes","role","_createBlock","_component_Dropdown","report","workunit_id","options","workunits","optionLabel","optionValue","filter","report_type","name","_component_Button","label","onClick","_cache","saveReport","_component_DataTable","reports","lazy","ref","dataKey","loading","globalFilterFields","selection","_ctx","selectedCustomers","selectAll","onSelectAllChange","onRowSelect","onRowUnselect","paginatorTemplate","rowsPerPageOptions","currentPageReportTemplate","responsiveLayout","_component_Column","field","header","sortable","slotProps","_hoisted_5","_toDisplayString","headerStyle","_hoisted_6","file_url","href","_hoisted_7","ReportRequestService","getReports","userData","parse","createReport","start_at","end_at","onsearchtimeout","totalRecords","cdate_start","cdate_end","selectedWorkunit","fields","workunitService","reportService","created","this","initFilters","mounted","first","$refs","dt","loadLazyData","methods","setTimeout","removeItem","$router","push","total","Math","random","onPage","event","onSort","onFilter","clearTimeout","onDownloadPdf","window","open","employeeService","getEmployeesReportPdfLink","day","getDate","month","getMonth","getFullYear","onSearch","onPengajuanWorkunitChange","pengajuan","employees","matchMode","FilterMatchMode","CONTAINS","success","paidLeaveDialog","paidLeave","$swal","icon","title","text","message","__exports__","render"],"sourceRoot":""}